{"version":3,"file":"JsonEncoder.mjs","names":[],"sources":["../../src/utils/JsonEncoder.ts"],"sourcesContent":["import type { AnyUint8Array, Uint8ArrayBuffer } from '../types'\nimport { base64ToBase64URL } from './base64'\nimport { Buffer } from './buffer'\nimport { TypedArrayEncoder } from './TypedArrayEncoder'\n\n// biome-ignore lint/complexity/noStaticOnlyClass: no explanation\nexport class JsonEncoder {\n  /**\n   * Encode json object into base64 string.\n   *\n   * @param json the json object to encode into base64 string\n   */\n  public static toBase64(json: unknown) {\n    return Buffer.from(JsonEncoder.toString(json)).toString('base64')\n  }\n\n  /**\n   * Encode json object into base64url string.\n   *\n   * @param json the json object to encode into base64url string\n   */\n  public static toBase64URL(json: unknown) {\n    return base64ToBase64URL(JsonEncoder.toBase64(json))\n  }\n\n  /**\n   * Decode base64 string into json object. Also supports base64url\n   *\n   * @param base64 the base64 or base64url string to decode into json\n   */\n  public static fromBase64(base64: string) {\n    return JsonEncoder.fromBuffer(TypedArrayEncoder.fromBase64(base64))\n  }\n\n  /**\n   * Encode json object into string\n   *\n   * @param json the json object to encode into string\n   */\n  public static toString(json: unknown) {\n    return JSON.stringify(json)\n  }\n\n  /**\n   * Decode string into json object\n   *\n   * @param string the string to decode into json\n   */\n  public static fromString(string: string) {\n    return JSON.parse(string)\n  }\n\n  /**\n   * Encode json object into buffer\n   *\n   * @param json the json object to encode into buffer format\n   */\n  public static toBuffer(json: unknown): Uint8ArrayBuffer {\n    return Buffer.from(JsonEncoder.toString(json))\n  }\n\n  /**\n   * Decode buffer into json object\n   *\n   * @param buffer the buffer to decode into json\n   */\n  public static fromBuffer(buffer: Buffer | AnyUint8Array) {\n    return JsonEncoder.fromString(Buffer.from(buffer).toString('utf-8'))\n  }\n}\n"],"mappings":";;;;;;;AAMA,IAAa,cAAb,MAAa,YAAY;;;;;;CAMvB,OAAc,SAAS,MAAe;AACpC,SAAO,OAAO,KAAK,YAAY,SAAS,KAAK,CAAC,CAAC,SAAS,SAAS;;;;;;;CAQnE,OAAc,YAAY,MAAe;AACvC,SAAO,kBAAkB,YAAY,SAAS,KAAK,CAAC;;;;;;;CAQtD,OAAc,WAAW,QAAgB;AACvC,SAAO,YAAY,WAAW,kBAAkB,WAAW,OAAO,CAAC;;;;;;;CAQrE,OAAc,SAAS,MAAe;AACpC,SAAO,KAAK,UAAU,KAAK;;;;;;;CAQ7B,OAAc,WAAW,QAAgB;AACvC,SAAO,KAAK,MAAM,OAAO;;;;;;;CAQ3B,OAAc,SAAS,MAAiC;AACtD,SAAO,OAAO,KAAK,YAAY,SAAS,KAAK,CAAC;;;;;;;CAQhD,OAAc,WAAW,QAAgC;AACvD,SAAO,YAAY,WAAW,OAAO,KAAK,OAAO,CAAC,SAAS,QAAQ,CAAC"}