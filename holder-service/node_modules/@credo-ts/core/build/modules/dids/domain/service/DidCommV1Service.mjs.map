{"version":3,"file":"DidCommV1Service.mjs","names":[],"sources":["../../../../../src/modules/dids/domain/service/DidCommV1Service.ts"],"sourcesContent":["import { ArrayNotEmpty, IsOptional, IsString } from 'class-validator'\n\nimport { IsUri } from '../../../../utils'\nimport { getProtocolScheme } from '../../../../utils/uri'\n\nimport { DidDocumentService } from './DidDocumentService'\n\nexport class DidCommV1Service extends DidDocumentService {\n  public constructor(options: {\n    id: string\n    serviceEndpoint: string\n    recipientKeys: string[]\n    routingKeys?: string[]\n    accept?: string[]\n    priority?: number\n  }) {\n    super({ ...options, type: DidCommV1Service.type })\n\n    if (options) {\n      this.recipientKeys = options.recipientKeys\n      this.routingKeys = options.routingKeys\n      this.accept = options.accept\n      if (options.priority) this.priority = options.priority\n    }\n  }\n\n  public static type = 'did-communication'\n\n  public get protocolScheme(): string {\n    return getProtocolScheme(this.serviceEndpoint)\n  }\n\n  @IsString()\n  @IsUri()\n  public serviceEndpoint!: string\n\n  @ArrayNotEmpty()\n  @IsString({ each: true })\n  public recipientKeys!: string[]\n\n  @IsString({ each: true })\n  @IsOptional()\n  public routingKeys?: string[]\n\n  @IsString({ each: true })\n  @IsOptional()\n  public accept?: string[]\n\n  public priority = 0\n}\n"],"mappings":";;;;;;;;;;;AAOA,IAAa,mBAAb,MAAa,yBAAyB,mBAAmB;CACvD,AAAO,YAAY,SAOhB;AACD,QAAM;GAAE,GAAG;GAAS,MAAM,iBAAiB;GAAM,CAAC;OAgC7C,WAAW;AA9BhB,MAAI,SAAS;AACX,QAAK,gBAAgB,QAAQ;AAC7B,QAAK,cAAc,QAAQ;AAC3B,QAAK,SAAS,QAAQ;AACtB,OAAI,QAAQ,SAAU,MAAK,WAAW,QAAQ;;;CAMlD,IAAW,iBAAyB;AAClC,SAAO,kBAAkB,KAAK,gBAAgB;;;iBAHlC,OAAO;;CAMpB,UAAU;CACV,OAAO;;;;CAGP,eAAe;CACf,SAAS,EAAE,MAAM,MAAM,CAAC;;;;CAGxB,SAAS,EAAE,MAAM,MAAM,CAAC;CACxB,YAAY;;;;CAGZ,SAAS,EAAE,MAAM,MAAM,CAAC;CACxB,YAAY"}