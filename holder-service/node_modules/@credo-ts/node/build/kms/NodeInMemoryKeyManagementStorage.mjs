import { _classPrivateFieldInitSpec } from "../_virtual/_@oxc-project_runtime@0.110.0/helpers/classPrivateFieldInitSpec.mjs";
import { _classPrivateFieldGet2 } from "../_virtual/_@oxc-project_runtime@0.110.0/helpers/classPrivateFieldGet2.mjs";

//#region src/kms/NodeInMemoryKeyManagementStorage.ts
var _storage = /* @__PURE__ */ new WeakMap();
var NodeInMemoryKeyManagementStorage = class {
	constructor() {
		_classPrivateFieldInitSpec(this, _storage, /* @__PURE__ */ new Map());
	}
	async get(agentContext, keyId) {
		return this.storageForContext(agentContext).get(keyId) ?? null;
	}
	has(agentContext, keyId) {
		return this.storageForContext(agentContext).has(keyId);
	}
	set(agentContext, keyId, jwk) {
		this.storageForContext(agentContext).set(keyId, jwk);
	}
	delete(agentContext, keyId) {
		return this.storageForContext(agentContext).delete(keyId);
	}
	storageForContext(agentContext) {
		let storage = _classPrivateFieldGet2(_storage, this).get(agentContext.contextCorrelationId);
		if (!storage) {
			storage = /* @__PURE__ */ new Map();
			_classPrivateFieldGet2(_storage, this).set(agentContext.contextCorrelationId, storage);
		}
		return storage;
	}
};

//#endregion
export { NodeInMemoryKeyManagementStorage };
//# sourceMappingURL=NodeInMemoryKeyManagementStorage.mjs.map