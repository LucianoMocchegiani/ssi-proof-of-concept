{"version":3,"file":"ThreadDecoratorExtension.mjs","names":[],"sources":["../../../src/decorators/thread/ThreadDecoratorExtension.ts"],"sourcesContent":["import { Expose, Type } from 'class-transformer'\nimport { IsInstance, IsOptional, ValidateNested } from 'class-validator'\nimport type { BaseMessageConstructor } from '../../BaseDidCommMessage'\n\nimport { ThreadDecorator } from './ThreadDecorator'\n\nexport function ThreadDecorated<T extends BaseMessageConstructor>(Base: T) {\n  class ThreadDecoratorExtension extends Base {\n    /**\n     * The ~thread decorator is generally required on any type of response, since this is what connects it with the original request.\n     */\n    @Expose({ name: '~thread' })\n    @IsOptional()\n    @Type(() => ThreadDecorator)\n    @ValidateNested()\n    @IsInstance(ThreadDecorator)\n    public thread?: ThreadDecorator\n\n    public get threadId(): string {\n      return this.thread?.threadId ?? this.id\n    }\n\n    public setThread(options: Partial<ThreadDecorator>) {\n      this.thread = new ThreadDecorator(options)\n    }\n  }\n\n  return ThreadDecoratorExtension\n}\n"],"mappings":";;;;;;;AAMA,SAAgB,gBAAkD,MAAS;;CACzE,MAAM,iCAAiC,KAAK;EAW1C,IAAW,WAAmB;AAC5B,UAAO,KAAK,QAAQ,YAAY,KAAK;;EAGvC,AAAO,UAAU,SAAmC;AAClD,QAAK,SAAS,IAAI,gBAAgB,QAAQ;;;;EAZ3C,OAAO,EAAE,MAAM,WAAW,CAAC;EAC3B,YAAY;EACZ,WAAW,gBAAgB;EAC3B,gBAAgB;EAChB,WAAW,gBAAgB;;;AAY9B,QAAO"}