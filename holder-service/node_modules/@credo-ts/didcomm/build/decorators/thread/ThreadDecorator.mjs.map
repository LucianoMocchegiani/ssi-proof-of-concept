{"version":3,"file":"ThreadDecorator.mjs","names":[],"sources":["../../../src/decorators/thread/ThreadDecorator.ts"],"sourcesContent":["import { Expose } from 'class-transformer'\nimport { IsInt, IsOptional, Matches } from 'class-validator'\n\n// ^did:[a-z0-9]+:(?:%[0-9A-Fa-f]{2}|[A-Za-z0-9.-])+  # domain (no ':', allows %XX)\n// (?::(?:%[0-9A-Fa-f]{2}|[A-Za-z0-9._~!$&'()*+,;=:@/?-])*)*  # extra colon-separated segments\n// (?:\\?(?:%[0-9A-Fa-f]{2}|[A-Za-z0-9._~!$&'()*+,;=:@/?-])*)?  # optional query\n// (?:#(?:%[0-9A-Fa-f]{2}|[A-Za-z0-9._~!$&'()*+,;=:@/?-])*)?   # optional fragment\n// $\n\nconst PthidRegExp =\n  /^([-_./A-Za-z0-9]{8,64}|did:[a-z0-9]+:(?:%[0-9A-Fa-f]{2}|[A-Za-z0-9.-])+(?::(?:%[0-9A-Fa-f]{2}|[A-Za-z0-9._~!$&'()*+,;=:@/?-])*)*(?:\\?(?:%[0-9A-Fa-f]{2}|[A-Za-z0-9._~!$&'()*+,;=:@/?-])*)?(?:#(?:%[0-9A-Fa-f]{2}|[A-Za-z0-9._~!$&'()*+,;=:@/?-])*)?)$/\n\n/**\n * Represents `~thread` decorator\n * @see https://github.com/hyperledger/aries-rfcs/blob/master/concepts/0008-message-id-and-threading/README.md\n */\n\nexport class ThreadDecorator {\n  public constructor(partial?: Partial<ThreadDecorator>) {\n    this.threadId = partial?.threadId\n    this.parentThreadId = partial?.parentThreadId\n    this.senderOrder = partial?.senderOrder\n    this.receivedOrders = partial?.receivedOrders\n  }\n\n  /**\n   * The ID of the message that serves as the thread start.\n   */\n  @Expose({ name: 'thid' })\n  @Matches(PthidRegExp)\n  @IsOptional()\n  public threadId?: string\n\n  /**\n   * An optional parent `thid`. Used when branching or nesting a new interaction off of an existing one.\n   */\n  @Expose({ name: 'pthid' })\n  @Matches(PthidRegExp)\n  @IsOptional()\n  public parentThreadId?: string\n\n  /**\n   * A number that tells where this message fits in the sequence of all messages that the current sender has contributed to this thread.\n   */\n  @Expose({ name: 'sender_order' })\n  @IsOptional()\n  @IsInt()\n  public senderOrder?: number\n\n  /**\n   * Reports the highest `sender_order` value that the sender has seen from other sender(s) on the thread.\n   * This value is often missing if it is the first message in an interaction, but should be used otherwise, as it provides an implicit ACK.\n   */\n  @Expose({ name: 'received_orders' })\n  @IsOptional()\n  public receivedOrders?: { [key: string]: number }\n}\n"],"mappings":";;;;;;AASA,MAAM,cACJ;;;;;AAOF,IAAa,kBAAb,MAA6B;CAC3B,AAAO,YAAY,SAAoC;AACrD,OAAK,WAAW,SAAS;AACzB,OAAK,iBAAiB,SAAS;AAC/B,OAAK,cAAc,SAAS;AAC5B,OAAK,iBAAiB,SAAS;;;;CAMhC,OAAO,EAAE,MAAM,QAAQ,CAAC;CACxB,QAAQ,YAAY;CACpB,YAAY;;;;CAMZ,OAAO,EAAE,MAAM,SAAS,CAAC;CACzB,QAAQ,YAAY;CACpB,YAAY;;;;CAMZ,OAAO,EAAE,MAAM,gBAAgB,CAAC;CAChC,YAAY;CACZ,OAAO;;;;CAOP,OAAO,EAAE,MAAM,mBAAmB,CAAC;CACnC,YAAY"}