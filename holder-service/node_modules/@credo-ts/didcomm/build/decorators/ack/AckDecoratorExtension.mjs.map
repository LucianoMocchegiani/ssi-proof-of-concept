{"version":3,"file":"AckDecoratorExtension.mjs","names":[],"sources":["../../../src/decorators/ack/AckDecoratorExtension.ts"],"sourcesContent":["import { Expose, Type } from 'class-transformer'\nimport { IsInstance, IsOptional, ValidateNested } from 'class-validator'\nimport type { BaseMessageConstructor } from '../../BaseDidCommMessage'\n\nimport { AckDecorator, AckValues } from './AckDecorator'\n\nexport function AckDecorated<T extends BaseMessageConstructor>(Base: T) {\n  class AckDecoratorExtension extends Base {\n    @Expose({ name: '~please_ack' })\n    @Type(() => AckDecorator)\n    @ValidateNested()\n    @IsInstance(AckDecorator)\n    @IsOptional()\n    public pleaseAck?: AckDecorator\n\n    public setPleaseAck(on: [AckValues.Receipt] = [AckValues.Receipt]) {\n      this.pleaseAck = new AckDecorator({ on })\n    }\n\n    public getPleaseAck(): AckDecorator | undefined {\n      return this.pleaseAck\n    }\n\n    public requiresAck(): boolean {\n      return this.pleaseAck !== undefined\n    }\n  }\n\n  return AckDecoratorExtension\n}\n"],"mappings":";;;;;;;AAMA,SAAgB,aAA+C,MAAS;;CACtE,MAAM,8BAA8B,KAAK;EAQvC,AAAO,aAAa,KAA0B,CAAC,UAAU,QAAQ,EAAE;AACjE,QAAK,YAAY,IAAI,aAAa,EAAE,IAAI,CAAC;;EAG3C,AAAO,eAAyC;AAC9C,UAAO,KAAK;;EAGd,AAAO,cAAuB;AAC5B,UAAO,KAAK,cAAc;;;;EAhB3B,OAAO,EAAE,MAAM,eAAe,CAAC;EAC/B,WAAW,aAAa;EACxB,gBAAgB;EAChB,WAAW,aAAa;EACxB,YAAY;;;AAgBf,QAAO"}