//#region src/handlers/DidCommMessageHandlerMiddleware.ts
var DidCommMessageHandlerMiddlewareRunner = class {
	static async run(middlewares, inboundMessageContext) {
		const compose = (middlewares) => {
			return async (inboundMessageContext) => {
				let index = -1;
				async function dispatch(i) {
					if (i <= index) throw new Error("next() called multiple times");
					index = i;
					const fn = middlewares[i];
					if (!fn) return;
					await fn(inboundMessageContext, () => dispatch(i + 1));
				}
				await dispatch(0);
			};
		};
		await compose(middlewares)(inboundMessageContext);
	}
};

//#endregion
export { DidCommMessageHandlerMiddlewareRunner };
//# sourceMappingURL=DidCommMessageHandlerMiddleware.mjs.map