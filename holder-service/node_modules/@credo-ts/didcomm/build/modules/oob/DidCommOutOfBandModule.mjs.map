{"version":3,"file":"DidCommOutOfBandModule.mjs","names":[],"sources":["../../../src/modules/oob/DidCommOutOfBandModule.ts"],"sourcesContent":["import type { AgentContext, DependencyManager, Module } from '@credo-ts/core'\n\nimport { DidCommFeatureRegistry } from '../../DidCommFeatureRegistry'\nimport { DidCommMessageHandlerRegistry } from '../../DidCommMessageHandlerRegistry'\nimport { DidCommProtocol } from '../../models'\nimport { DidCommOutOfBandApi } from './DidCommOutOfBandApi'\nimport { DidCommOutOfBandService } from './DidCommOutOfBandService'\nimport { DidCommHandshakeReuseHandler } from './handlers'\nimport { DidCommHandshakeReuseAcceptedHandler } from './handlers/DidCommHandshakeReuseAcceptedHandler'\nimport { DidCommOutOfBandRepository } from './repository'\n\nexport class DidCommOutOfBandModule implements Module {\n  public readonly api = DidCommOutOfBandApi\n\n  /**\n   * Registers the dependencies of the ot of band module on the dependency manager.\n   */\n  public register(dependencyManager: DependencyManager) {\n    // Services\n    dependencyManager.registerSingleton(DidCommOutOfBandService)\n\n    // Repositories\n    dependencyManager.registerSingleton(DidCommOutOfBandRepository)\n  }\n\n  public async initialize(agentContext: AgentContext): Promise<void> {\n    // Features\n    const featureRegistry = agentContext.resolve(DidCommFeatureRegistry)\n    const messageHandlerRegistry = agentContext.resolve(DidCommMessageHandlerRegistry)\n    const outOfBandService = agentContext.resolve(DidCommOutOfBandService)\n\n    messageHandlerRegistry.registerMessageHandler(new DidCommHandshakeReuseHandler(outOfBandService))\n    messageHandlerRegistry.registerMessageHandler(new DidCommHandshakeReuseAcceptedHandler(outOfBandService))\n\n    featureRegistry.register(\n      new DidCommProtocol({\n        id: 'https://didcomm.org/out-of-band/1.1',\n        roles: ['sender', 'receiver'],\n      })\n    )\n  }\n}\n"],"mappings":";;;;;;;;;;;;;AAWA,IAAa,yBAAb,MAAsD;;OACpC,MAAM;;;;;CAKtB,AAAO,SAAS,mBAAsC;AAEpD,oBAAkB,kBAAkB,wBAAwB;AAG5D,oBAAkB,kBAAkB,2BAA2B;;CAGjE,MAAa,WAAW,cAA2C;EAEjE,MAAM,kBAAkB,aAAa,QAAQ,uBAAuB;EACpE,MAAM,yBAAyB,aAAa,QAAQ,8BAA8B;EAClF,MAAM,mBAAmB,aAAa,QAAQ,wBAAwB;AAEtE,yBAAuB,uBAAuB,IAAI,6BAA6B,iBAAiB,CAAC;AACjG,yBAAuB,uBAAuB,IAAI,qCAAqC,iBAAiB,CAAC;AAEzG,kBAAgB,SACd,IAAI,gBAAgB;GAClB,IAAI;GACJ,OAAO,CAAC,UAAU,WAAW;GAC9B,CAAC,CACH"}