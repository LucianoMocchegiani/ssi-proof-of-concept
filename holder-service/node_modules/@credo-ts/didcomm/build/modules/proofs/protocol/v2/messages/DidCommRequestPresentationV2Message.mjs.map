{"version":3,"file":"DidCommRequestPresentationV2Message.mjs","names":[],"sources":["../../../../../../src/modules/proofs/protocol/v2/messages/DidCommRequestPresentationV2Message.ts"],"sourcesContent":["import { utils } from '@credo-ts/core'\nimport { Expose, Type } from 'class-transformer'\nimport { IsArray, IsBoolean, IsInstance, IsOptional, IsString, ValidateNested } from 'class-validator'\n\nimport { DidCommMessage } from '../../../../../DidCommMessage'\nimport { DidCommAttachment } from '../../../../../decorators/attachment/DidCommAttachment'\nimport { IsValidMessageType, parseMessageType } from '../../../../../util/messageType'\nimport { DidCommProofFormatSpec } from '../../../models/DidCommProofFormatSpec'\n\nexport interface DidCommRequestPresentationV2MessageOptions {\n  id?: string\n  comment?: string\n  goalCode?: string\n  goal?: string\n  presentMultiple?: boolean\n  willConfirm?: boolean\n  formats: DidCommProofFormatSpec[]\n  requestAttachments: DidCommAttachment[]\n}\n\nexport class DidCommRequestPresentationV2Message extends DidCommMessage {\n  public constructor(options: DidCommRequestPresentationV2MessageOptions) {\n    super()\n\n    if (options) {\n      this.formats = []\n      this.requestAttachments = []\n      this.id = options.id ?? utils.uuid()\n      this.comment = options.comment\n      this.goal = options.goal\n      this.goalCode = options.goalCode\n      this.willConfirm = options.willConfirm ?? true\n      this.presentMultiple = options.presentMultiple ?? false\n      this.requestAttachments = options.requestAttachments\n      this.formats = options.formats\n    }\n  }\n\n  @IsValidMessageType(DidCommRequestPresentationV2Message.type)\n  public readonly type = DidCommRequestPresentationV2Message.type.messageTypeUri\n  public static readonly type = parseMessageType('https://didcomm.org/present-proof/2.0/request-presentation')\n\n  @IsString()\n  @IsOptional()\n  public comment?: string\n\n  @Expose({ name: 'goal_code' })\n  @IsString()\n  @IsOptional()\n  public goalCode?: string\n\n  @IsString()\n  @IsOptional()\n  public goal?: string\n\n  @Expose({ name: 'will_confirm' })\n  @IsBoolean()\n  public willConfirm = false\n\n  @Expose({ name: 'present_multiple' })\n  @IsBoolean()\n  public presentMultiple = false\n\n  @Expose({ name: 'formats' })\n  @Type(() => DidCommProofFormatSpec)\n  @IsArray()\n  @ValidateNested({ each: true })\n  @IsInstance(DidCommProofFormatSpec, { each: true })\n  public formats!: DidCommProofFormatSpec[]\n\n  @Expose({ name: 'request_presentations~attach' })\n  @Type(() => DidCommAttachment)\n  @IsArray()\n  @ValidateNested({ each: true })\n  @IsInstance(DidCommAttachment, { each: true })\n  public requestAttachments!: DidCommAttachment[]\n\n  public getRequestAttachmentById(id: string): DidCommAttachment | undefined {\n    return this.requestAttachments.find((attachment) => attachment.id === id)\n  }\n}\n"],"mappings":";;;;;;;;;;;AAoBA,IAAa,sCAAb,MAAa,4CAA4C,eAAe;CACtE,AAAO,YAAY,SAAqD;AACtE,SAAO;OAiBO,OAAO,oCAAoC,KAAK;OAkBzD,cAAc;OAId,kBAAkB;AArCvB,MAAI,SAAS;AACX,QAAK,UAAU,EAAE;AACjB,QAAK,qBAAqB,EAAE;AAC5B,QAAK,KAAK,QAAQ,MAAM,MAAM,MAAM;AACpC,QAAK,UAAU,QAAQ;AACvB,QAAK,OAAO,QAAQ;AACpB,QAAK,WAAW,QAAQ;AACxB,QAAK,cAAc,QAAQ,eAAe;AAC1C,QAAK,kBAAkB,QAAQ,mBAAmB;AAClD,QAAK,qBAAqB,QAAQ;AAClC,QAAK,UAAU,QAAQ;;;CA2C3B,AAAO,yBAAyB,IAA2C;AACzE,SAAO,KAAK,mBAAmB,MAAM,eAAe,WAAW,OAAO,GAAG;;;oCAtCpD,OAAO,iBAAiB,6DAA6D;YAF3G,mBAAmB,oCAAoC,KAAK;;CAI5D,UAAU;CACV,YAAY;;;;CAGZ,OAAO,EAAE,MAAM,aAAa,CAAC;CAC7B,UAAU;CACV,YAAY;;;;CAGZ,UAAU;CACV,YAAY;;;;CAGZ,OAAO,EAAE,MAAM,gBAAgB,CAAC;CAChC,WAAW;;;;CAGX,OAAO,EAAE,MAAM,oBAAoB,CAAC;CACpC,WAAW;;;;CAGX,OAAO,EAAE,MAAM,WAAW,CAAC;CAC3B,WAAW,uBAAuB;CAClC,SAAS;CACT,eAAe,EAAE,MAAM,MAAM,CAAC;CAC9B,WAAW,wBAAwB,EAAE,MAAM,MAAM,CAAC;;;;CAGlD,OAAO,EAAE,MAAM,gCAAgC,CAAC;CAChD,WAAW,kBAAkB;CAC7B,SAAS;CACT,eAAe,EAAE,MAAM,MAAM,CAAC;CAC9B,WAAW,mBAAmB,EAAE,MAAM,MAAM,CAAC"}