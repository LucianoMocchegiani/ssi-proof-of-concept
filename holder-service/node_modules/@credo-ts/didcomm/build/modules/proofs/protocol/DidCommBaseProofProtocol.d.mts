import { DidCommMessage } from "../../../DidCommMessage.mjs";
import { DidCommProblemReportMessage } from "../../../messages/problem-reports/DidCommProblemReportMessage.mjs";
import "../../../messages/index.mjs";
import { DidCommMessageHandlerRegistry } from "../../../DidCommMessageHandlerRegistry.mjs";
import { DidCommProofState } from "../models/DidCommProofState.mjs";
import { DidCommProofRole } from "../models/DidCommProofRole.mjs";
import { DidCommProofExchangeRecord } from "../repository/DidCommProofExchangeRecord.mjs";
import "../repository/index.mjs";
import { ExtractProofFormats } from "../formats/DidCommProofFormatServiceOptions.mjs";
import { DidCommProofFormatService } from "../formats/DidCommProofFormatService.mjs";
import "../formats/index.mjs";
import { AcceptPresentationOptions, AcceptProofProposalOptions, AcceptProofRequestOptions, CreateProofProblemReportOptions, CreateProofProposalOptions, CreateProofRequestOptions, DeleteProofOptions, GetCredentialsForRequestOptions, GetCredentialsForRequestReturn, GetProofFormatDataReturn, NegotiateProofProposalOptions, NegotiateProofRequestOptions, ProofProtocolMsgReturnType, SelectCredentialsForRequestOptions, SelectCredentialsForRequestReturn } from "./DidCommProofProtocolOptions.mjs";
import { DidCommProofProtocol } from "./DidCommProofProtocol.mjs";
import { DidCommInboundMessageContext } from "../../../models/DidCommInboundMessageContext.mjs";
import "../../../models/index.mjs";
import { DidCommFeatureRegistry } from "../../../DidCommFeatureRegistry.mjs";
import { AgentContext, Query, QueryOptions } from "@credo-ts/core";

//#region src/modules/proofs/protocol/DidCommBaseProofProtocol.d.ts
declare abstract class DidCommBaseProofProtocol<PFs extends DidCommProofFormatService[] = DidCommProofFormatService[]> implements DidCommProofProtocol<PFs> {
  abstract readonly version: string;
  abstract register(messageHandlerRegistry: DidCommMessageHandlerRegistry, featureRegistry: DidCommFeatureRegistry): void;
  abstract createProposal(agentContext: AgentContext, options: CreateProofProposalOptions<PFs>): Promise<ProofProtocolMsgReturnType<DidCommMessage>>;
  abstract processProposal(messageContext: DidCommInboundMessageContext<DidCommMessage>): Promise<DidCommProofExchangeRecord>;
  abstract acceptProposal(agentContext: AgentContext, options: AcceptProofProposalOptions<PFs>): Promise<ProofProtocolMsgReturnType<DidCommMessage>>;
  abstract negotiateProposal(agentContext: AgentContext, options: NegotiateProofProposalOptions<PFs>): Promise<ProofProtocolMsgReturnType<DidCommMessage>>;
  abstract createRequest(agentContext: AgentContext, options: CreateProofRequestOptions<PFs>): Promise<ProofProtocolMsgReturnType<DidCommMessage>>;
  abstract processRequest(messageContext: DidCommInboundMessageContext<DidCommMessage>): Promise<DidCommProofExchangeRecord>;
  abstract acceptRequest(agentContext: AgentContext, options: AcceptProofRequestOptions<PFs>): Promise<ProofProtocolMsgReturnType<DidCommMessage>>;
  abstract negotiateRequest(agentContext: AgentContext, options: NegotiateProofRequestOptions<PFs>): Promise<ProofProtocolMsgReturnType<DidCommMessage>>;
  abstract getCredentialsForRequest(agentContext: AgentContext, options: GetCredentialsForRequestOptions<PFs>): Promise<GetCredentialsForRequestReturn<PFs>>;
  abstract selectCredentialsForRequest(agentContext: AgentContext, options: SelectCredentialsForRequestOptions<PFs>): Promise<SelectCredentialsForRequestReturn<PFs>>;
  abstract processPresentation(messageContext: DidCommInboundMessageContext<DidCommMessage>): Promise<DidCommProofExchangeRecord>;
  abstract acceptPresentation(agentContext: AgentContext, options: AcceptPresentationOptions): Promise<ProofProtocolMsgReturnType<DidCommMessage>>;
  abstract processAck(messageContext: DidCommInboundMessageContext<DidCommMessage>): Promise<DidCommProofExchangeRecord>;
  abstract createProblemReport(agentContext: AgentContext, options: CreateProofProblemReportOptions): Promise<ProofProtocolMsgReturnType<DidCommProblemReportMessage>>;
  abstract findProposalMessage(agentContext: AgentContext, proofExchangeId: string): Promise<DidCommMessage | null>;
  abstract findRequestMessage(agentContext: AgentContext, proofExchangeId: string): Promise<DidCommMessage | null>;
  abstract findPresentationMessage(agentContext: AgentContext, proofExchangeId: string): Promise<DidCommMessage | null>;
  abstract getFormatData(agentContext: AgentContext, proofExchangeId: string): Promise<GetProofFormatDataReturn<ExtractProofFormats<PFs>>>;
  processProblemReport(messageContext: DidCommInboundMessageContext<DidCommProblemReportMessage>): Promise<DidCommProofExchangeRecord>;
  /**
   * Update the record to a new state and emit an state changed event. Also updates the record
   * in storage.
   *
   * @param proofRecord The proof record to update the state for
   * @param newState The state to update to
   *
   */
  updateState(agentContext: AgentContext, proofRecord: DidCommProofExchangeRecord, newState: DidCommProofState): Promise<void>;
  protected emitStateChangedEvent(agentContext: AgentContext, proofRecord: DidCommProofExchangeRecord, previousState: DidCommProofState | null): void;
  /**
   * Retrieve a proof record by id
   *
   * @param proofExchangeRecordId The proof record id
   * @throws {RecordNotFoundError} If no record is found
   * @return The proof record
   *
   */
  getById(agentContext: AgentContext, proofExchangeRecordId: string): Promise<DidCommProofExchangeRecord>;
  /**
   * Retrieve all proof records
   *
   * @returns List containing all proof records
   */
  getAll(agentContext: AgentContext): Promise<DidCommProofExchangeRecord[]>;
  findAllByQuery(agentContext: AgentContext, query: Query<DidCommProofExchangeRecord>, queryOptions?: QueryOptions): Promise<DidCommProofExchangeRecord[]>;
  /**
   * Find a proof record by id
   *
   * @param proofExchangeRecordId the proof record id
   * @returns The proof record or null if not found
   */
  findById(agentContext: AgentContext, proofExchangeRecordId: string): Promise<DidCommProofExchangeRecord | null>;
  delete(agentContext: AgentContext, proofRecord: DidCommProofExchangeRecord, options?: DeleteProofOptions): Promise<void>;
  /**
   * Retrieve a proof record by connection id and thread id
   *
   * @param properties Properties to query by
   *
   * @throws {RecordNotFoundError} If no record is found
   * @throws {RecordDuplicateError} If multiple records are found
   *
   * @returns The proof record
   */
  getByProperties(agentContext: AgentContext, properties: {
    threadId: string;
    role?: DidCommProofRole;
    connectionId?: string;
  }): Promise<DidCommProofExchangeRecord>;
  /**
   * Find a proof record by connection id and thread id, returns null if not found
   *
   * @param properties Properties to query by
   *
   * @returns The proof record
   */
  findByProperties(agentContext: AgentContext, properties: {
    threadId: string;
    role?: DidCommProofRole;
    connectionId?: string;
  }): Promise<DidCommProofExchangeRecord | null>;
  update(agentContext: AgentContext, proofRecord: DidCommProofExchangeRecord): Promise<void>;
}
//#endregion
export { DidCommBaseProofProtocol };
//# sourceMappingURL=DidCommBaseProofProtocol.d.mts.map