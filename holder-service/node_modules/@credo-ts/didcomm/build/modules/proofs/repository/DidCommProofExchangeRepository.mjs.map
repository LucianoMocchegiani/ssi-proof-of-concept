{"version":3,"file":"DidCommProofExchangeRepository.mjs","names":[],"sources":["../../../../src/modules/proofs/repository/DidCommProofExchangeRepository.ts"],"sourcesContent":["import type { AgentContext } from '@credo-ts/core'\n\nimport { EventEmitter, InjectionSymbols, inject, injectable, Repository, type StorageService } from '@credo-ts/core'\n\nimport { DidCommProofExchangeRecord } from './DidCommProofExchangeRecord'\n\n@injectable()\nexport class DidCommProofExchangeRepository extends Repository<DidCommProofExchangeRecord> {\n  public constructor(\n    @inject(InjectionSymbols.StorageService) storageService: StorageService<DidCommProofExchangeRecord>,\n    eventEmitter: EventEmitter\n  ) {\n    super(DidCommProofExchangeRecord, storageService, eventEmitter)\n  }\n\n  /**\n   * Retrieve a proof record by connection id and thread id\n   *\n   * @param connectionId The connection id\n   * @param threadId The thread id\n   * @throws {RecordNotFoundError} If no record is found\n   * @throws {RecordDuplicateError} If multiple records are found\n   * @returns The proof record\n   */\n  public async getByThreadAndConnectionId(\n    agentContext: AgentContext,\n    threadId: string,\n    connectionId?: string\n  ): Promise<DidCommProofExchangeRecord> {\n    return this.getSingleByQuery(agentContext, { threadId, connectionId })\n  }\n\n  /**\n   * Retrieve proof records by connection id and parent thread id\n   *\n   * @param connectionId The connection id\n   * @param parentThreadId The parent thread id\n   * @returns List containing all proof records matching the given query\n   */\n  public async getByParentThreadAndConnectionId(\n    agentContext: AgentContext,\n    parentThreadId: string,\n    connectionId?: string\n  ): Promise<DidCommProofExchangeRecord[]> {\n    return this.findByQuery(agentContext, { parentThreadId, connectionId })\n  }\n}\n"],"mappings":";;;;;;;;AAOO,2CAAM,uCAAuC,WAAuC;CACzF,AAAO,YACL,AAAyC,gBACzC,cACA;AACA,QAAM,4BAA4B,gBAAgB,aAAa;;;;;;;;;;;CAYjE,MAAa,2BACX,cACA,UACA,cACqC;AACrC,SAAO,KAAK,iBAAiB,cAAc;GAAE;GAAU;GAAc,CAAC;;;;;;;;;CAUxE,MAAa,iCACX,cACA,gBACA,cACuC;AACvC,SAAO,KAAK,YAAY,cAAc;GAAE;GAAgB;GAAc,CAAC;;;;CAtC1E,YAAY;oBAGR,OAAO,iBAAiB,eAAe"}