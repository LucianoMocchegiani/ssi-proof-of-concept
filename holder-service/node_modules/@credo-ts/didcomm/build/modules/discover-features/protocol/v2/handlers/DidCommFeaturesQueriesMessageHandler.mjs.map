{"version":3,"file":"DidCommFeaturesQueriesMessageHandler.mjs","names":[],"sources":["../../../../../../src/modules/discover-features/protocol/v2/handlers/DidCommFeaturesQueriesMessageHandler.ts"],"sourcesContent":["import type { DidCommMessageHandler, DidCommMessageHandlerInboundMessage } from '../../../../../handlers'\nimport { DidCommOutboundMessageContext } from '../../../../../models'\nimport type { DidCommDiscoverFeaturesV2Service } from '../DidCommDiscoverFeaturesV2Service'\nimport { DidCommFeaturesQueriesMessage } from '../messages'\n\nexport class DidCommFeaturesQueriesMessageHandler implements DidCommMessageHandler {\n  private discoverFeaturesService: DidCommDiscoverFeaturesV2Service\n  public supportedMessages = [DidCommFeaturesQueriesMessage]\n\n  public constructor(discoverFeaturesService: DidCommDiscoverFeaturesV2Service) {\n    this.discoverFeaturesService = discoverFeaturesService\n  }\n\n  public async handle(inboundMessage: DidCommMessageHandlerInboundMessage<DidCommFeaturesQueriesMessageHandler>) {\n    const connection = inboundMessage.assertReadyConnection()\n\n    const discloseMessage = await this.discoverFeaturesService.processQuery(inboundMessage)\n\n    if (discloseMessage) {\n      return new DidCommOutboundMessageContext(discloseMessage.message, {\n        agentContext: inboundMessage.agentContext,\n        connection,\n      })\n    }\n  }\n}\n"],"mappings":";;;;;;AAKA,IAAa,uCAAb,MAAmF;CAIjF,AAAO,YAAY,yBAA2D;OAFvE,oBAAoB,CAAC,8BAA8B;AAGxD,OAAK,0BAA0B;;CAGjC,MAAa,OAAO,gBAA2F;EAC7G,MAAM,aAAa,eAAe,uBAAuB;EAEzD,MAAM,kBAAkB,MAAM,KAAK,wBAAwB,aAAa,eAAe;AAEvF,MAAI,gBACF,QAAO,IAAI,8BAA8B,gBAAgB,SAAS;GAChE,cAAc,eAAe;GAC7B;GACD,CAAC"}