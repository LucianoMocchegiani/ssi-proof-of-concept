{"version":3,"file":"DidCommFeaturesDiscloseMessage.mjs","names":[],"sources":["../../../../../../src/modules/discover-features/protocol/v1/messages/DidCommFeaturesDiscloseMessage.ts"],"sourcesContent":["import { Expose, Type } from 'class-transformer'\nimport { IsInstance, IsOptional, IsString } from 'class-validator'\n\nimport { DidCommMessage } from '../../../../../DidCommMessage'\nimport { IsValidMessageType, parseMessageType } from '../../../../../util/messageType'\n\nexport interface DidCommFeaturesDiscloseProtocolOptions {\n  protocolId: string\n  roles?: string[]\n}\n\nexport class DidCommFeaturesDiscloseProtocol {\n  public constructor(options: DidCommFeaturesDiscloseProtocolOptions) {\n    if (options) {\n      this.protocolId = options.protocolId\n      this.roles = options.roles\n    }\n  }\n\n  @Expose({ name: 'pid' })\n  @IsString()\n  public protocolId!: string\n\n  @IsString({ each: true })\n  @IsOptional()\n  public roles?: string[]\n}\n\nexport interface DidCommFeaturesDiscloseMessageOptions {\n  id?: string\n  threadId: string\n  protocols: DidCommFeaturesDiscloseProtocolOptions[]\n}\n\nexport class DidCommFeaturesDiscloseMessage extends DidCommMessage {\n  public constructor(options: DidCommFeaturesDiscloseMessageOptions) {\n    super()\n\n    if (options) {\n      this.id = options.id ?? this.generateId()\n      this.protocols = options.protocols.map((p) => new DidCommFeaturesDiscloseProtocol(p))\n      this.setThread({\n        threadId: options.threadId,\n      })\n    }\n  }\n\n  @IsValidMessageType(DidCommFeaturesDiscloseMessage.type)\n  public readonly type = DidCommFeaturesDiscloseMessage.type.messageTypeUri\n  public static readonly type = parseMessageType('https://didcomm.org/discover-features/1.0/disclose')\n\n  @IsInstance(DidCommFeaturesDiscloseProtocol, { each: true })\n  @Type(() => DidCommFeaturesDiscloseProtocol)\n  public protocols!: DidCommFeaturesDiscloseProtocol[]\n}\n"],"mappings":";;;;;;;;AAWA,IAAa,kCAAb,MAA6C;CAC3C,AAAO,YAAY,SAAiD;AAClE,MAAI,SAAS;AACX,QAAK,aAAa,QAAQ;AAC1B,QAAK,QAAQ,QAAQ;;;;;CAIxB,OAAO,EAAE,MAAM,OAAO,CAAC;CACvB,UAAU;;;;CAGV,SAAS,EAAE,MAAM,MAAM,CAAC;CACxB,YAAY;;;AAUf,IAAa,iCAAb,MAAa,uCAAuC,eAAe;CACjE,AAAO,YAAY,SAAgD;AACjE,SAAO;OAYO,OAAO,+BAA+B,KAAK;AAVzD,MAAI,SAAS;AACX,QAAK,KAAK,QAAQ,MAAM,KAAK,YAAY;AACzC,QAAK,YAAY,QAAQ,UAAU,KAAK,MAAM,IAAI,gCAAgC,EAAE,CAAC;AACrF,QAAK,UAAU,EACb,UAAU,QAAQ,UACnB,CAAC;;;;+BAMiB,OAAO,iBAAiB,qDAAqD;YAFnG,mBAAmB,+BAA+B,KAAK;;CAIvD,WAAW,iCAAiC,EAAE,MAAM,MAAM,CAAC;CAC3D,WAAW,gCAAgC"}