{"version":3,"file":"DidCommFeaturesQueryMessageHandler.mjs","names":[],"sources":["../../../../../../src/modules/discover-features/protocol/v1/handlers/DidCommFeaturesQueryMessageHandler.ts"],"sourcesContent":["import type { DidCommMessageHandler, DidCommMessageHandlerInboundMessage } from '../../../../../handlers'\nimport { DidCommOutboundMessageContext } from '../../../../../models'\nimport type { DidCommDiscoverFeaturesV1Service } from '../DidCommDiscoverFeaturesV1Service'\nimport { DidCommFeaturesQueryMessage } from '../messages'\n\nexport class DidCommFeaturesQueryMessageHandler implements DidCommMessageHandler {\n  private discoverFeaturesService: DidCommDiscoverFeaturesV1Service\n  public supportedMessages = [DidCommFeaturesQueryMessage]\n\n  public constructor(discoverFeaturesService: DidCommDiscoverFeaturesV1Service) {\n    this.discoverFeaturesService = discoverFeaturesService\n  }\n\n  public async handle(inboundMessage: DidCommMessageHandlerInboundMessage<DidCommFeaturesQueryMessageHandler>) {\n    const connection = inboundMessage.assertReadyConnection()\n\n    const discloseMessage = await this.discoverFeaturesService.processQuery(inboundMessage)\n\n    if (discloseMessage) {\n      return new DidCommOutboundMessageContext(discloseMessage.message, {\n        agentContext: inboundMessage.agentContext,\n        connection,\n      })\n    }\n  }\n}\n"],"mappings":";;;;;;AAKA,IAAa,qCAAb,MAAiF;CAI/E,AAAO,YAAY,yBAA2D;OAFvE,oBAAoB,CAAC,4BAA4B;AAGtD,OAAK,0BAA0B;;CAGjC,MAAa,OAAO,gBAAyF;EAC3G,MAAM,aAAa,eAAe,uBAAuB;EAEzD,MAAM,kBAAkB,MAAM,KAAK,wBAAwB,aAAa,eAAe;AAEvF,MAAI,gBACF,QAAO,IAAI,8BAA8B,gBAAgB,SAAS;GAChE,cAAc,eAAe;GAC7B;GACD,CAAC"}