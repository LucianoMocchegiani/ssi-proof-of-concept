{"version":3,"file":"DidCommBasicMessage.mjs","names":[],"sources":["../../../../src/modules/basic-messages/messages/DidCommBasicMessage.ts"],"sourcesContent":["import { Expose, Transform } from 'class-transformer'\nimport { IsDate, IsString } from 'class-validator'\n\nimport { DidCommMessage } from '../../../DidCommMessage'\nimport { IsValidMessageType, parseMessageType } from '../../../util/messageType'\nimport { DateParser } from '../../../util/transformers'\n\nexport class DidCommBasicMessage extends DidCommMessage {\n  public readonly allowDidSovPrefix = true\n\n  /**\n   * Create new DidCommBasicMessage instance.\n   * sentTime will be assigned to new Date if not passed, id will be assigned to uuid/v4 if not passed\n   * @param options\n   */\n  public constructor(options: { content: string; sentTime?: Date; id?: string; locale?: string }) {\n    super()\n\n    if (options) {\n      this.id = options.id || this.generateId()\n      this.sentTime = options.sentTime || new Date()\n      this.content = options.content\n      this.addLocale(options.locale || 'en')\n    }\n  }\n\n  @IsValidMessageType(DidCommBasicMessage.type)\n  public readonly type = DidCommBasicMessage.type.messageTypeUri\n  public static readonly type = parseMessageType('https://didcomm.org/basicmessage/1.0/message')\n\n  @Expose({ name: 'sent_time' })\n  @Transform(({ value }) => DateParser(value))\n  @IsDate()\n  public sentTime!: Date\n\n  @Expose({ name: 'content' })\n  @IsString()\n  public content!: string\n}\n"],"mappings":";;;;;;;;;;AAOA,IAAa,sBAAb,MAAa,4BAA4B,eAAe;;;;;;CAQtD,AAAO,YAAY,SAA6E;AAC9F,SAAO;OARO,oBAAoB;OAmBpB,OAAO,oBAAoB,KAAK;AAT9C,MAAI,SAAS;AACX,QAAK,KAAK,QAAQ,MAAM,KAAK,YAAY;AACzC,QAAK,WAAW,QAAQ,4BAAY,IAAI,MAAM;AAC9C,QAAK,UAAU,QAAQ;AACvB,QAAK,UAAU,QAAQ,UAAU,KAAK;;;;oBAMnB,OAAO,iBAAiB,+CAA+C;YAF7F,mBAAmB,oBAAoB,KAAK;;CAI5C,OAAO,EAAE,MAAM,aAAa,CAAC;CAC7B,WAAW,EAAE,YAAY,WAAW,MAAM,CAAC;CAC3C,QAAQ;;;;CAGR,OAAO,EAAE,MAAM,WAAW,CAAC;CAC3B,UAAU"}