{"version":3,"file":"DidCommStatusV2Message.mjs","names":[],"sources":["../../../../../../src/modules/message-pickup/protocol/v2/messages/DidCommStatusV2Message.ts"],"sourcesContent":["import { Expose, Transform } from 'class-transformer'\nimport { IsBoolean, IsDate, IsInt, IsOptional, IsString } from 'class-validator'\n\nimport { DidCommMessage } from '../../../../../DidCommMessage'\nimport { ReturnRouteTypes } from '../../../../../decorators/transport/TransportDecorator'\nimport { IsValidMessageType, parseMessageType } from '../../../../../util/messageType'\nimport { DateParser } from '../../../../../util/transformers'\n\nexport interface DidCommStatusV2MessageOptions {\n  id?: string\n  recipientKey?: string\n  threadId: string\n  messageCount: number\n  longestWaitedSeconds?: number\n  newestReceivedTime?: Date\n  oldestReceivedTime?: Date\n  totalBytes?: number\n  liveDelivery?: boolean\n}\n\nexport class DidCommStatusV2Message extends DidCommMessage {\n  public readonly allowQueueTransport = false\n\n  public constructor(options: DidCommStatusV2MessageOptions) {\n    super()\n    if (options) {\n      this.id = options.id || this.generateId()\n      this.recipientKey = options.recipientKey\n      this.messageCount = options.messageCount\n      this.longestWaitedSeconds = options.longestWaitedSeconds\n      this.newestReceivedTime = options.newestReceivedTime\n      this.oldestReceivedTime = options.oldestReceivedTime\n      this.totalBytes = options.totalBytes\n      this.liveDelivery = options.liveDelivery\n      this.setThread({\n        threadId: options.threadId,\n      })\n    }\n    this.setReturnRouting(ReturnRouteTypes.all)\n  }\n\n  @IsValidMessageType(DidCommStatusV2Message.type)\n  public readonly type = DidCommStatusV2Message.type.messageTypeUri\n  public static readonly type = parseMessageType('https://didcomm.org/messagepickup/2.0/status')\n\n  @IsString()\n  @IsOptional()\n  @Expose({ name: 'recipient_key' })\n  public recipientKey?: string\n\n  @IsInt()\n  @Expose({ name: 'message_count' })\n  public messageCount!: number\n\n  @IsInt()\n  @IsOptional()\n  @Expose({ name: 'longest_waited_seconds' })\n  public longestWaitedSeconds?: number\n\n  @Expose({ name: 'newest_received_time' })\n  @Transform(({ value }) => DateParser(value))\n  @IsDate()\n  @IsOptional()\n  public newestReceivedTime?: Date\n\n  @IsOptional()\n  @Transform(({ value }) => DateParser(value))\n  @IsDate()\n  @Expose({ name: 'oldest_received_time' })\n  public oldestReceivedTime?: Date\n\n  @IsOptional()\n  @IsInt()\n  @Expose({ name: 'total_bytes' })\n  public totalBytes?: number\n\n  @IsOptional()\n  @IsBoolean()\n  @Expose({ name: 'live_delivery' })\n  public liveDelivery?: boolean\n}\n"],"mappings":";;;;;;;;;;;AAoBA,IAAa,yBAAb,MAAa,+BAA+B,eAAe;CAGzD,AAAO,YAAY,SAAwC;AACzD,SAAO;OAHO,sBAAsB;OAqBtB,OAAO,uBAAuB,KAAK;AAjBjD,MAAI,SAAS;AACX,QAAK,KAAK,QAAQ,MAAM,KAAK,YAAY;AACzC,QAAK,eAAe,QAAQ;AAC5B,QAAK,eAAe,QAAQ;AAC5B,QAAK,uBAAuB,QAAQ;AACpC,QAAK,qBAAqB,QAAQ;AAClC,QAAK,qBAAqB,QAAQ;AAClC,QAAK,aAAa,QAAQ;AAC1B,QAAK,eAAe,QAAQ;AAC5B,QAAK,UAAU,EACb,UAAU,QAAQ,UACnB,CAAC;;AAEJ,OAAK,iBAAiB,iBAAiB,IAAI;;;uBAKtB,OAAO,iBAAiB,+CAA+C;YAF7F,mBAAmB,uBAAuB,KAAK;;CAI/C,UAAU;CACV,YAAY;CACZ,OAAO,EAAE,MAAM,iBAAiB,CAAC;;;;CAGjC,OAAO;CACP,OAAO,EAAE,MAAM,iBAAiB,CAAC;;;;CAGjC,OAAO;CACP,YAAY;CACZ,OAAO,EAAE,MAAM,0BAA0B,CAAC;;;;CAG1C,OAAO,EAAE,MAAM,wBAAwB,CAAC;CACxC,WAAW,EAAE,YAAY,WAAW,MAAM,CAAC;CAC3C,QAAQ;CACR,YAAY;;;;CAGZ,YAAY;CACZ,WAAW,EAAE,YAAY,WAAW,MAAM,CAAC;CAC3C,QAAQ;CACR,OAAO,EAAE,MAAM,wBAAwB,CAAC;;;;CAGxC,YAAY;CACZ,OAAO;CACP,OAAO,EAAE,MAAM,eAAe,CAAC;;;;CAG/B,YAAY;CACZ,WAAW;CACX,OAAO,EAAE,MAAM,iBAAiB,CAAC"}