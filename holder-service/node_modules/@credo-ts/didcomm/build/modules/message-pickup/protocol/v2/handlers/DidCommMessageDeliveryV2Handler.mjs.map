{"version":3,"file":"DidCommMessageDeliveryV2Handler.mjs","names":[],"sources":["../../../../../../src/modules/message-pickup/protocol/v2/handlers/DidCommMessageDeliveryV2Handler.ts"],"sourcesContent":["import type { DidCommMessageHandler } from '../../../../../handlers'\nimport type { DidCommInboundMessageContext } from '../../../../../models'\nimport { DidCommOutboundMessageContext } from '../../../../../models'\nimport type { DidCommMessagePickupV2Protocol } from '../DidCommMessagePickupV2Protocol'\nimport { DidCommMessageDeliveryV2Message } from '../messages/DidCommMessageDeliveryV2Message'\n\nexport class DidCommMessageDeliveryV2Handler implements DidCommMessageHandler {\n  public supportedMessages = [DidCommMessageDeliveryV2Message]\n  private messagePickupService: DidCommMessagePickupV2Protocol\n\n  public constructor(messagePickupService: DidCommMessagePickupV2Protocol) {\n    this.messagePickupService = messagePickupService\n  }\n\n  public async handle(messageContext: DidCommInboundMessageContext<DidCommMessageDeliveryV2Message>) {\n    const connection = messageContext.assertReadyConnection()\n    const deliveryReceivedMessage = await this.messagePickupService.processDelivery(messageContext)\n\n    if (deliveryReceivedMessage) {\n      return new DidCommOutboundMessageContext(deliveryReceivedMessage, {\n        agentContext: messageContext.agentContext,\n        connection,\n      })\n    }\n  }\n}\n"],"mappings":";;;;;AAMA,IAAa,kCAAb,MAA8E;CAI5E,AAAO,YAAY,sBAAsD;OAHlE,oBAAoB,CAAC,gCAAgC;AAI1D,OAAK,uBAAuB;;CAG9B,MAAa,OAAO,gBAA+E;EACjG,MAAM,aAAa,eAAe,uBAAuB;EACzD,MAAM,0BAA0B,MAAM,KAAK,qBAAqB,gBAAgB,eAAe;AAE/F,MAAI,wBACF,QAAO,IAAI,8BAA8B,yBAAyB;GAChE,cAAc,eAAe;GAC7B;GACD,CAAC"}