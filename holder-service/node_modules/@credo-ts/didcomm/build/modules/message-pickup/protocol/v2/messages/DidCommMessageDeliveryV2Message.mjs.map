{"version":3,"file":"DidCommMessageDeliveryV2Message.mjs","names":[],"sources":["../../../../../../src/modules/message-pickup/protocol/v2/messages/DidCommMessageDeliveryV2Message.ts"],"sourcesContent":["import { Expose } from 'class-transformer'\nimport { IsOptional, IsString } from 'class-validator'\nimport { DidCommMessage } from '../../../../../DidCommMessage'\nimport type { DidCommAttachment } from '../../../../../decorators/attachment/DidCommAttachment'\nimport { ReturnRouteTypes } from '../../../../../decorators/transport/TransportDecorator'\nimport { IsValidMessageType, parseMessageType } from '../../../../../util/messageType'\n\nexport interface DidCommMessageDeliveryV2MessageOptions {\n  id?: string\n  recipientKey?: string\n  threadId?: string\n  attachments: DidCommAttachment[]\n}\n\nexport class DidCommMessageDeliveryV2Message extends DidCommMessage {\n  public readonly allowQueueTransport = false\n\n  public constructor(options: DidCommMessageDeliveryV2MessageOptions) {\n    super()\n\n    if (options) {\n      this.id = options.id || this.generateId()\n      this.recipientKey = options.recipientKey\n      this.appendedAttachments = options.attachments\n      if (this.threadId) {\n        this.setThread({\n          threadId: options.threadId,\n        })\n      }\n    }\n    this.setReturnRouting(ReturnRouteTypes.all)\n  }\n\n  @IsValidMessageType(DidCommMessageDeliveryV2Message.type)\n  public readonly type = DidCommMessageDeliveryV2Message.type.messageTypeUri\n  public static readonly type = parseMessageType('https://didcomm.org/messagepickup/2.0/delivery')\n\n  @IsString()\n  @IsOptional()\n  @Expose({ name: 'recipient_key' })\n  public recipientKey?: string\n}\n"],"mappings":";;;;;;;;;AAcA,IAAa,kCAAb,MAAa,wCAAwC,eAAe;CAGlE,AAAO,YAAY,SAAiD;AAClE,SAAO;OAHO,sBAAsB;OAmBtB,OAAO,gCAAgC,KAAK;AAd1D,MAAI,SAAS;AACX,QAAK,KAAK,QAAQ,MAAM,KAAK,YAAY;AACzC,QAAK,eAAe,QAAQ;AAC5B,QAAK,sBAAsB,QAAQ;AACnC,OAAI,KAAK,SACP,MAAK,UAAU,EACb,UAAU,QAAQ,UACnB,CAAC;;AAGN,OAAK,iBAAiB,iBAAiB,IAAI;;;gCAKtB,OAAO,iBAAiB,iDAAiD;YAF/F,mBAAmB,gCAAgC,KAAK;;CAIxD,UAAU;CACV,YAAY;CACZ,OAAO,EAAE,MAAM,iBAAiB,CAAC"}