import { DidCommMessage } from "../../../DidCommMessage.mjs";
import { DidCommConnectionService } from "../../connections/services/DidCommConnectionService.mjs";
import { DidCommKeylistUpdate, DidCommKeylistUpdateAction, DidCommKeylistUpdateMessage } from "../messages/DidCommKeylistUpdateMessage.mjs";
import { DidCommKeylistUpdateResponseMessage } from "../messages/DidCommKeylistUpdateResponseMessage.mjs";
import { DidCommMediationDenyMessage } from "../messages/DidCommMediationDenyMessage.mjs";
import { DidCommMediationGrantMessage } from "../messages/DidCommMediationGrantMessage.mjs";
import { DidCommMediationRequestMessage } from "../messages/DidCommMediationRequestMessage.mjs";
import "../messages/index.mjs";
import { DidCommMediationRecord } from "../repository/DidCommMediationRecord.mjs";
import { DidCommMediationRepository } from "../repository/DidCommMediationRepository.mjs";
import { GetRoutingOptions, RemoveRoutingOptions } from "./DidCommRoutingService.mjs";
import { DidCommMessageSender } from "../../../DidCommMessageSender.mjs";
import { DidCommConnectionRecord } from "../../connections/repository/DidCommConnectionRecord.mjs";
import "../../connections/repository/index.mjs";
import { DidCommInboundMessageContext } from "../../../models/DidCommInboundMessageContext.mjs";
import { DidCommRouting } from "../../../models/DidCommRouting.mjs";
import "../../../models/index.mjs";
import { AgentContext, EventEmitter, Kms, Query, QueryOptions } from "@credo-ts/core";

//#region src/modules/routing/services/DidCommMediationRecipientService.d.ts
declare class DidCommMediationRecipientService {
  private mediationRepository;
  private eventEmitter;
  private connectionService;
  private messageSender;
  constructor(connectionService: DidCommConnectionService, messageSender: DidCommMessageSender, mediatorRepository: DidCommMediationRepository, eventEmitter: EventEmitter);
  createRequest(agentContext: AgentContext, connection: DidCommConnectionRecord): Promise<MediationProtocolMsgReturnType<DidCommMediationRequestMessage>>;
  processMediationGrant(messageContext: DidCommInboundMessageContext<DidCommMediationGrantMessage>): Promise<DidCommMediationRecord>;
  processKeylistUpdateResults(messageContext: DidCommInboundMessageContext<DidCommKeylistUpdateResponseMessage>): Promise<void>;
  keylistUpdateAndAwait(agentContext: AgentContext, mediationRecord: DidCommMediationRecord, updates: {
    recipientKey: Kms.PublicJwk<Kms.Ed25519PublicJwk>;
    action: DidCommKeylistUpdateAction;
  }[], timeoutMs?: number): Promise<DidCommMediationRecord>;
  createKeylistUpdateMessage(updates: DidCommKeylistUpdate[]): DidCommKeylistUpdateMessage;
  addMediationRouting(agentContext: AgentContext, routing: DidCommRouting, {
    mediatorId,
    useDefaultMediator
  }?: GetRoutingOptions): Promise<DidCommRouting>;
  removeMediationRouting(agentContext: AgentContext, {
    recipientKeys,
    mediatorId
  }: RemoveRoutingOptions): Promise<void>;
  processMediationDeny(messageContext: DidCommInboundMessageContext<DidCommMediationDenyMessage>): Promise<DidCommMediationRecord>;
  /**
   * Update the record to a new state and emit an state changed event. Also updates the record
   * in storage.
   *
   * @param MediationRecord The proof record to update the state for
   * @param newState The state to update to
   *
   */
  private updateState;
  private emitStateChangedEvent;
  getById(agentContext: AgentContext, id: string): Promise<DidCommMediationRecord>;
  findByConnectionId(agentContext: AgentContext, connectionId: string): Promise<DidCommMediationRecord | null>;
  getMediators(agentContext: AgentContext): Promise<DidCommMediationRecord[]>;
  findAllMediatorsByQuery(agentContext: AgentContext, query: Query<DidCommMediationRecord>, queryOptions?: QueryOptions): Promise<DidCommMediationRecord[]>;
  findDefaultMediator(agentContext: AgentContext): Promise<DidCommMediationRecord | null>;
  discoverMediation(agentContext: AgentContext, mediatorId?: string): Promise<DidCommMediationRecord | undefined>;
  setDefaultMediator(agentContext: AgentContext, mediator: DidCommMediationRecord): Promise<void>;
  clearDefaultMediator(agentContext: AgentContext): Promise<void>;
  private updateUseDidKeysFlag;
}
interface MediationProtocolMsgReturnType<MessageType extends DidCommMessage> {
  message: MessageType;
  mediationRecord: DidCommMediationRecord;
}
//#endregion
export { DidCommMediationRecipientService, MediationProtocolMsgReturnType };
//# sourceMappingURL=DidCommMediationRecipientService.d.mts.map