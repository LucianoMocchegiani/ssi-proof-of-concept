{"version":3,"file":"DidCommMediationRecipientModuleConfig.mjs","names":[],"sources":["../../../src/modules/routing/DidCommMediationRecipientModuleConfig.ts"],"sourcesContent":["import type { DidCommMediatorPickupStrategy } from './DidCommMediatorPickupStrategy'\n\n/**\n * MediationRecipientModuleConfigOptions defines the interface for the options of the MediationRecipientModuleConfig class.\n * This can contain optional parameters that have default values in the config class itself.\n */\nexport interface DidCommMediationRecipientModuleConfigOptions {\n  /**\n   * Strategy to use for picking up messages from the mediator. If no strategy is provided, the agent will use the discover\n   * features protocol to determine the best strategy.\n   *\n   *\n   * - `DidCommMediatorPickupStrategy.PickUpV1`         - explicitly pick up messages from the mediator in periodic loops according to [RFC 0212 Pickup Protocol](https://github.com/hyperledger/aries-rfcs/blob/main/features/0212-pickup/README.md)\n   * - `DidCommMediatorPickupStrategy.PickUpV2`         - pick up messages from the mediator in periodic loops according to [RFC 0685 Pickup V2 Protocol](https://github.com/hyperledger/aries-rfcs/tree/main/features/0685-pickup-v2/README.md).\n   * - `DidCommMediatorPickupStrategy.PickUpV2LiveMode` - pick up messages from the mediator using Live Mode as specified in [RFC 0685 Pickup V2 Protocol](https://github.com/hyperledger/aries-rfcs/tree/main/features/0685-pickup-v2/README.md).\n   * - `DidCommMediatorPickupStrategy.Implicit`         - Open a WebSocket with the mediator to implicitly receive messages. (currently used by Aries Cloud Agent Python)\n   * - `DidCommMediatorPickupStrategy.None`             - Do not retrieve messages from the mediator automatically. You can launch manual pickup flows afterwards.\n   *\n   * @default undefined\n   */\n  mediatorPickupStrategy?: DidCommMediatorPickupStrategy\n\n  /**\n   * Interval in milliseconds between picking up message from the mediator. This is only applicable when the pickup protocol v1 or v2 in polling mode\n   * are used.\n   *\n   * @default 5000\n   */\n  mediatorPollingInterval?: number\n\n  /**\n   * Maximum number of messages to retrieve from the mediator in a single batch. This is applicable for both pickup protocol v1 and v2\n   * is used.\n   *\n   * @default 10\n   */\n  maximumMessagePickup?: number\n\n  /**\n   * Initial interval in milliseconds between reconnection attempts when losing connection with the mediator. This value is doubled after\n   * each retry, resulting in an exponential backoff strategy.\n   *\n   * For instance, if maximumMediatorReconnectionIntervalMs is b, the agent will attempt to reconnect after b, 2*b, 4*b, 8*b, 16*b, ... ms.\n   *\n   * This is only applicable when pickup protocol v2 or implicit pickup is used.\n   *\n   * @default 100\n   */\n  baseMediatorReconnectionIntervalMs?: number\n\n  /**\n   * Maximum interval in milliseconds between reconnection attempts when losing connection with the mediator.\n   *\n   * For instance, if maximumMediatorReconnectionIntervalMs is set to 1000 and maximumMediatorReconnectionIntervalMs is set to 10000,\n   * the agent will attempt to reconnect after 1000, 2000, 4000, 8000, 10000, ..., 10000 ms.\n   *\n   * This is only applicable when pickup protocol v2 or implicit pickup is used.\n   * @default Number.POSITIVE_INFINITY\n   */\n  maximumMediatorReconnectionIntervalMs?: number\n\n  /**\n   * Invitation url for connection to a mediator. If provided, a connection to the mediator will be made, and the mediator will be set as default.\n   * This is meant as the simplest form of connecting to a mediator, if more control is desired the api should be used.\n   *\n   * Supports both RFC 0434 Out Of Band v1 and RFC 0160 Connections v1 invitations.\n   */\n  mediatorInvitationUrl?: string\n}\n\nexport class DidCommMediationRecipientModuleConfig {\n  private options: DidCommMediationRecipientModuleConfigOptions\n\n  public constructor(options?: DidCommMediationRecipientModuleConfigOptions) {\n    this.options = options ?? {}\n  }\n\n  /** See {@link DidCommMediationRecipientModuleConfigOptions.mediatorPollingInterval} */\n  public get mediatorPollingInterval() {\n    return this.options.mediatorPollingInterval ?? 5000\n  }\n\n  /** See {@link DidCommMediationRecipientModuleConfigOptions.mediatorPickupStrategy} */\n  public get mediatorPickupStrategy() {\n    return this.options.mediatorPickupStrategy\n  }\n\n  /** See {@link DidCommMediationRecipientModuleConfigOptions.maximumMessagePickup} */\n  public get maximumMessagePickup() {\n    return this.options.maximumMessagePickup ?? 10\n  }\n\n  /** See {@link DidCommMediationRecipientModuleConfigOptions.baseMediatorReconnectionIntervalMs} */\n  public get baseMediatorReconnectionIntervalMs() {\n    return this.options.baseMediatorReconnectionIntervalMs ?? 100\n  }\n\n  /** See {@link DidCommMediationRecipientModuleConfigOptions.maximumMediatorReconnectionIntervalMs} */\n  public get maximumMediatorReconnectionIntervalMs() {\n    return this.options.maximumMediatorReconnectionIntervalMs ?? Number.POSITIVE_INFINITY\n  }\n\n  /** See {@link DidCommMediationRecipientModuleConfigOptions.mediatorInvitationUrl} */\n  public get mediatorInvitationUrl() {\n    return this.options.mediatorInvitationUrl\n  }\n}\n"],"mappings":";AAsEA,IAAa,wCAAb,MAAmD;CAGjD,AAAO,YAAY,SAAwD;AACzE,OAAK,UAAU,WAAW,EAAE;;;CAI9B,IAAW,0BAA0B;AACnC,SAAO,KAAK,QAAQ,2BAA2B;;;CAIjD,IAAW,yBAAyB;AAClC,SAAO,KAAK,QAAQ;;;CAItB,IAAW,uBAAuB;AAChC,SAAO,KAAK,QAAQ,wBAAwB;;;CAI9C,IAAW,qCAAqC;AAC9C,SAAO,KAAK,QAAQ,sCAAsC;;;CAI5D,IAAW,wCAAwC;AACjD,SAAO,KAAK,QAAQ,yCAAyC,OAAO;;;CAItE,IAAW,wBAAwB;AACjC,SAAO,KAAK,QAAQ"}