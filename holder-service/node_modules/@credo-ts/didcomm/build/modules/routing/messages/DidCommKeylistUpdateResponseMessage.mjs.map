{"version":3,"file":"DidCommKeylistUpdateResponseMessage.mjs","names":[],"sources":["../../../../src/modules/routing/messages/DidCommKeylistUpdateResponseMessage.ts"],"sourcesContent":["import { Expose, Type } from 'class-transformer'\nimport { IsArray, IsEnum, IsInstance, IsString, ValidateNested } from 'class-validator'\n\nimport { DidCommMessage } from '../../../DidCommMessage'\nimport { IsValidMessageType, parseMessageType } from '../../../util/messageType'\n\nimport { DidCommKeylistUpdateAction } from './DidCommKeylistUpdateMessage'\n\nexport enum DidCommKeylistUpdateResult {\n  ClientError = 'client_error',\n  ServerError = 'server_error',\n  NoChange = 'no_change',\n  Success = 'success',\n}\n\nexport class DidCommKeylistUpdated {\n  public constructor(options: {\n    recipientKey: string\n    action: DidCommKeylistUpdateAction\n    result: DidCommKeylistUpdateResult\n  }) {\n    if (options) {\n      this.recipientKey = options.recipientKey\n      this.action = options.action\n      this.result = options.result\n    }\n  }\n\n  @IsString()\n  @Expose({ name: 'recipient_key' })\n  public recipientKey!: string\n\n  @IsEnum(DidCommKeylistUpdateAction)\n  public action!: DidCommKeylistUpdateAction\n\n  @IsEnum(DidCommKeylistUpdateResult)\n  public result!: DidCommKeylistUpdateResult\n}\n\nexport interface DidCommKeylistUpdateResponseMessageOptions {\n  id?: string\n  keylist: DidCommKeylistUpdated[]\n  threadId: string\n}\n\n/**\n * Used to notify an edge agent with the result of updating the routing keys in the mediator.\n *\n * @see https://github.com/hyperledger/aries-rfcs/blob/master/features/0211-route-coordination/README.md#keylist-update-response\n */\nexport class DidCommKeylistUpdateResponseMessage extends DidCommMessage {\n  public constructor(options: DidCommKeylistUpdateResponseMessageOptions) {\n    super()\n\n    if (options) {\n      this.id = options.id || this.generateId()\n      this.updated = options.keylist\n      this.setThread({\n        threadId: options.threadId,\n      })\n    }\n  }\n\n  @IsValidMessageType(DidCommKeylistUpdateResponseMessage.type)\n  public readonly type = DidCommKeylistUpdateResponseMessage.type.messageTypeUri\n  public static readonly type = parseMessageType('https://didcomm.org/coordinate-mediation/1.0/keylist-update-response')\n\n  @Type(() => DidCommKeylistUpdated)\n  @IsArray()\n  @ValidateNested()\n  @IsInstance(DidCommKeylistUpdated, { each: true })\n  public updated!: DidCommKeylistUpdated[]\n}\n"],"mappings":";;;;;;;;;;AAQA,IAAY,kFAAL;AACL;AACA;AACA;AACA;;;AAGF,IAAa,wBAAb,MAAmC;CACjC,AAAO,YAAY,SAIhB;AACD,MAAI,SAAS;AACX,QAAK,eAAe,QAAQ;AAC5B,QAAK,SAAS,QAAQ;AACtB,QAAK,SAAS,QAAQ;;;;;CAIzB,UAAU;CACV,OAAO,EAAE,MAAM,iBAAiB,CAAC;;;YAGjC,OAAO,2BAA2B;YAGlC,OAAO,2BAA2B;;;;;;AAerC,IAAa,sCAAb,MAAa,4CAA4C,eAAe;CACtE,AAAO,YAAY,SAAqD;AACtE,SAAO;OAYO,OAAO,oCAAoC,KAAK;AAV9D,MAAI,SAAS;AACX,QAAK,KAAK,QAAQ,MAAM,KAAK,YAAY;AACzC,QAAK,UAAU,QAAQ;AACvB,QAAK,UAAU,EACb,UAAU,QAAQ,UACnB,CAAC;;;;oCAMiB,OAAO,iBAAiB,uEAAuE;YAFrH,mBAAmB,oCAAoC,KAAK;;CAI5D,WAAW,sBAAsB;CACjC,SAAS;CACT,gBAAgB;CAChB,WAAW,uBAAuB,EAAE,MAAM,MAAM,CAAC"}