{"version":3,"file":"DidCommKeylistUpdateMessage.mjs","names":[],"sources":["../../../../src/modules/routing/messages/DidCommKeylistUpdateMessage.ts"],"sourcesContent":["import { Expose, Type } from 'class-transformer'\nimport { IsArray, IsEnum, IsInstance, IsString, ValidateNested } from 'class-validator'\n\nimport { DidCommMessage } from '../../../DidCommMessage'\nimport { IsValidMessageType, parseMessageType } from '../../../util/messageType'\n\nexport enum DidCommKeylistUpdateAction {\n  add = 'add',\n  remove = 'remove',\n}\n\nexport interface DidCommKeylistUpdateOptions {\n  recipientKey: string\n  action: DidCommKeylistUpdateAction\n}\n\nexport class DidCommKeylistUpdate {\n  public constructor(options: DidCommKeylistUpdateOptions) {\n    if (options) {\n      this.recipientKey = options.recipientKey\n      this.action = options.action\n    }\n  }\n\n  @IsString()\n  @Expose({ name: 'recipient_key' })\n  public recipientKey!: string\n\n  @IsEnum(DidCommKeylistUpdateAction)\n  public action!: DidCommKeylistUpdateAction\n}\n\nexport interface DidCommKeylistUpdateMessageOptions {\n  id?: string\n  updates: DidCommKeylistUpdate[]\n}\n\n/**\n * Used to notify the mediator of keys in use by the recipient.\n *\n * @see https://github.com/hyperledger/aries-rfcs/blob/master/features/0211-route-coordination/README.md#keylist-update\n */\nexport class DidCommKeylistUpdateMessage extends DidCommMessage {\n  public constructor(options: DidCommKeylistUpdateMessageOptions) {\n    super()\n\n    if (options) {\n      this.id = options.id || this.generateId()\n      this.updates = options.updates\n    }\n  }\n\n  @IsValidMessageType(DidCommKeylistUpdateMessage.type)\n  public readonly type = DidCommKeylistUpdateMessage.type.messageTypeUri\n  public static readonly type = parseMessageType('https://didcomm.org/coordinate-mediation/1.0/keylist-update')\n\n  @Type(() => DidCommKeylistUpdate)\n  @IsArray()\n  @ValidateNested()\n  @IsInstance(DidCommKeylistUpdate, { each: true })\n  public updates!: DidCommKeylistUpdate[]\n}\n"],"mappings":";;;;;;;;;AAMA,IAAY,kFAAL;AACL;AACA;;;AAQF,IAAa,uBAAb,MAAkC;CAChC,AAAO,YAAY,SAAsC;AACvD,MAAI,SAAS;AACX,QAAK,eAAe,QAAQ;AAC5B,QAAK,SAAS,QAAQ;;;;;CAIzB,UAAU;CACV,OAAO,EAAE,MAAM,iBAAiB,CAAC;;;YAGjC,OAAO,2BAA2B;;;;;;AAcrC,IAAa,8BAAb,MAAa,oCAAoC,eAAe;CAC9D,AAAO,YAAY,SAA6C;AAC9D,SAAO;OASO,OAAO,4BAA4B,KAAK;AAPtD,MAAI,SAAS;AACX,QAAK,KAAK,QAAQ,MAAM,KAAK,YAAY;AACzC,QAAK,UAAU,QAAQ;;;;4BAMJ,OAAO,iBAAiB,8DAA8D;YAF5G,mBAAmB,4BAA4B,KAAK;;CAIpD,WAAW,qBAAqB;CAChC,SAAS;CACT,gBAAgB;CAChB,WAAW,sBAAsB,EAAE,MAAM,MAAM,CAAC"}