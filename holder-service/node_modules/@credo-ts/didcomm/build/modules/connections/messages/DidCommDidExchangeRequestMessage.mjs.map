{"version":3,"file":"DidCommDidExchangeRequestMessage.mjs","names":[],"sources":["../../../../src/modules/connections/messages/DidCommDidExchangeRequestMessage.ts"],"sourcesContent":["import { Expose, Type } from 'class-transformer'\nimport { IsOptional, IsString, ValidateNested } from 'class-validator'\n\nimport { DidCommMessage } from '../../../DidCommMessage'\nimport { DidCommAttachment } from '../../../decorators/attachment/DidCommAttachment'\nimport { IsValidMessageType, parseMessageType } from '../../../util/messageType'\n\nexport interface DidCommDidExchangeRequestMessageOptions {\n  id?: string\n  parentThreadId: string\n  label: string\n  goalCode?: string\n  goal?: string\n  did: string\n}\n\n/**\n * Message to communicate the DID document to the other agent when creating a connection\n *\n * @see https://github.com/hyperledger/aries-rfcs/blob/main/features/0023-did-exchange/README.md#1-exchange-request\n */\nexport class DidCommDidExchangeRequestMessage extends DidCommMessage {\n  /**\n   * Create new DidExchangeRequestMessage instance.\n   * @param options\n   */\n  public constructor(options: DidCommDidExchangeRequestMessageOptions) {\n    super()\n\n    if (options) {\n      this.id = options.id || this.generateId()\n      this.label = options.label\n      this.goalCode = options.goalCode\n      this.goal = options.goal\n      this.did = options.did\n\n      this.setThread({\n        parentThreadId: options.parentThreadId,\n      })\n    }\n  }\n\n  @IsValidMessageType(DidCommDidExchangeRequestMessage.type)\n  public readonly type = DidCommDidExchangeRequestMessage.type.messageTypeUri\n  public static readonly type = parseMessageType('https://didcomm.org/didexchange/1.1/request')\n\n  @IsString()\n  public readonly label?: string\n\n  @Expose({ name: 'goal_code' })\n  @IsOptional()\n  public readonly goalCode?: string\n\n  @IsString()\n  @IsOptional()\n  public readonly goal?: string\n\n  @IsString()\n  public readonly did!: string\n\n  @Expose({ name: 'did_doc~attach' })\n  @Type(() => DidCommAttachment)\n  @ValidateNested()\n  public didDoc?: DidCommAttachment\n}\n"],"mappings":";;;;;;;;;;;;;;;AAqBA,IAAa,mCAAb,MAAa,yCAAyC,eAAe;;;;;CAKnE,AAAO,YAAY,SAAkD;AACnE,SAAO;OAgBO,OAAO,iCAAiC,KAAK;AAd3D,MAAI,SAAS;AACX,QAAK,KAAK,QAAQ,MAAM,KAAK,YAAY;AACzC,QAAK,QAAQ,QAAQ;AACrB,QAAK,WAAW,QAAQ;AACxB,QAAK,OAAO,QAAQ;AACpB,QAAK,MAAM,QAAQ;AAEnB,QAAK,UAAU,EACb,gBAAgB,QAAQ,gBACzB,CAAC;;;;iCAMiB,OAAO,iBAAiB,8CAA8C;YAF5F,mBAAmB,iCAAiC,KAAK;YAIzD,UAAU;;CAGV,OAAO,EAAE,MAAM,aAAa,CAAC;CAC7B,YAAY;;;;CAGZ,UAAU;CACV,YAAY;;;YAGZ,UAAU;;CAGV,OAAO,EAAE,MAAM,kBAAkB,CAAC;CAClC,WAAW,kBAAkB;CAC7B,gBAAgB"}