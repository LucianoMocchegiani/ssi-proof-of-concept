{"version":3,"file":"DidCommConnectionRequestMessage.mjs","names":[],"sources":["../../../../src/modules/connections/messages/DidCommConnectionRequestMessage.ts"],"sourcesContent":["import { Type } from 'class-transformer'\nimport { IsInstance, IsOptional, IsString, IsUrl, ValidateNested } from 'class-validator'\nimport { DidCommMessage } from '../../../DidCommMessage'\nimport { IsValidMessageType, parseMessageType } from '../../../util/messageType'\nimport type { DidDoc } from '../models'\nimport { DidCommConnection } from '../models'\n\nexport interface DidCommConnectionRequestMessageOptions {\n  id?: string\n  label: string\n  did: string\n  didDoc?: DidDoc\n  imageUrl?: string\n}\n\n/**\n * Message to communicate the DID document to the other agent when creating a connection\n *\n * @see https://github.com/hyperledger/aries-rfcs/blob/master/features/0160-connection-protocol/README.md#1-connection-request\n */\nexport class DidCommConnectionRequestMessage extends DidCommMessage {\n  public readonly allowDidSovPrefix = true\n\n  /**\n   * Create new ConnectionRequestMessage instance.\n   * @param options\n   */\n  public constructor(options: DidCommConnectionRequestMessageOptions) {\n    super()\n\n    if (options) {\n      this.id = options.id || this.generateId()\n      this.label = options.label\n      this.imageUrl = options.imageUrl\n\n      this.connection = new DidCommConnection({\n        did: options.did,\n        didDoc: options.didDoc,\n      })\n    }\n  }\n\n  @IsValidMessageType(DidCommConnectionRequestMessage.type)\n  public readonly type = DidCommConnectionRequestMessage.type.messageTypeUri\n  public static readonly type = parseMessageType('https://didcomm.org/connections/1.0/request')\n\n  @IsString()\n  public label!: string\n\n  @Type(() => DidCommConnection)\n  @ValidateNested()\n  @IsInstance(DidCommConnection)\n  public connection!: DidCommConnection\n\n  @IsOptional()\n  @IsUrl()\n  public imageUrl?: string\n}\n"],"mappings":";;;;;;;;;;;;;;;;AAoBA,IAAa,kCAAb,MAAa,wCAAwC,eAAe;;;;;CAOlE,AAAO,YAAY,SAAiD;AAClE,SAAO;OAPO,oBAAoB;OAsBpB,OAAO,gCAAgC,KAAK;AAb1D,MAAI,SAAS;AACX,QAAK,KAAK,QAAQ,MAAM,KAAK,YAAY;AACzC,QAAK,QAAQ,QAAQ;AACrB,QAAK,WAAW,QAAQ;AAExB,QAAK,aAAa,IAAI,kBAAkB;IACtC,KAAK,QAAQ;IACb,QAAQ,QAAQ;IACjB,CAAC;;;;gCAMiB,OAAO,iBAAiB,8CAA8C;YAF5F,mBAAmB,gCAAgC,KAAK;YAIxD,UAAU;;CAGV,WAAW,kBAAkB;CAC7B,gBAAgB;CAChB,WAAW,kBAAkB;;;;CAG7B,YAAY;CACZ,OAAO"}