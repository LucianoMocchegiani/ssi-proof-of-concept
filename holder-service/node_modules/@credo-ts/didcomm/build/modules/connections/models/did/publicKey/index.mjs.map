{"version":3,"file":"index.mjs","names":[],"sources":["../../../../../../src/modules/connections/models/did/publicKey/index.ts"],"sourcesContent":["import type { ClassConstructor } from 'class-transformer'\n\nimport { plainToInstance, Transform } from 'class-transformer'\n\nimport { Ed25119Sig2018 } from './Ed25119Sig2018'\nimport { EddsaSaSigSecp256k1 } from './EddsaSaSigSecp256k1'\nimport { PublicKey } from './PublicKey'\nimport { RsaSig2018 } from './RsaSig2018'\n\nexport const publicKeyTypes: { [key: string]: unknown | undefined } = {\n  RsaVerificationKey2018: RsaSig2018,\n  Ed25519VerificationKey2018: Ed25119Sig2018,\n  Secp256k1VerificationKey2018: EddsaSaSigSecp256k1,\n}\n\n/**\n * Decorator that transforms public key json to corresonding class instances. See {@link publicKeyTypes}\n *\n * @example\n * class Example {\n *   ï¼ PublicKeyTransformer()\n *   private publicKey: PublicKey\n * }\n */\nexport function PublicKeyTransformer() {\n  return Transform(\n    ({ value }: { value: { type: string }[] }) => {\n      return value.map((publicKeyJson) => {\n        const publicKeyClass = (publicKeyTypes[publicKeyJson.type] ?? PublicKey) as ClassConstructor<PublicKey>\n        const publicKey = plainToInstance<PublicKey, unknown>(publicKeyClass, publicKeyJson)\n\n        return publicKey\n      })\n    },\n    {\n      toClassOnly: true,\n    }\n  )\n}\n\nexport { Ed25119Sig2018, PublicKey, EddsaSaSigSecp256k1, RsaSig2018 }\n"],"mappings":";;;;;;;AASA,MAAa,iBAAyD;CACpE,wBAAwB;CACxB,4BAA4B;CAC5B,8BAA8B;CAC/B;;;;;;;;;;AAWD,SAAgB,uBAAuB;AACrC,QAAO,WACJ,EAAE,YAA2C;AAC5C,SAAO,MAAM,KAAK,kBAAkB;AAIlC,UAFkB,gBADM,eAAe,cAAc,SAAS,WACQ,cAAc;IAGpF;IAEJ,EACE,aAAa,MACd,CACF"}