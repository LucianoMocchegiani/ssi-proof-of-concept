import { DidCommMessage } from "../../../DidCommMessage.mjs";
import { DidCommAutoAcceptCredential } from "../models/DidCommCredentialAutoAcceptType.mjs";
import { DidCommCredentialPreviewAttributeOptions } from "../models/DidCommCredentialPreviewAttribute.mjs";
import { DidCommCredentialExchangeRecord } from "../repository/DidCommCredentialExchangeRecord.mjs";
import { DidCommCredentialFormat, DidCommCredentialFormatPayload } from "../formats/DidCommCredentialFormat.mjs";
import { ExtractCredentialFormats } from "../formats/DidCommCredentialFormatServiceOptions.mjs";
import { DidCommCredentialFormatService } from "../formats/DidCommCredentialFormatService.mjs";
import "../formats/index.mjs";
import { DidCommCredentialProtocol } from "./DidCommCredentialProtocol.mjs";
import "../../connections/index.mjs";
import { DidCommConnectionRecord } from "../../connections/repository/DidCommConnectionRecord.mjs";

//#region src/modules/credentials/protocol/DidCommCredentialProtocolOptions.d.ts
declare namespace DidCommCredentialProtocolOptions_d_exports {
  export { AcceptCredentialOfferOptions, AcceptCredentialOptions, AcceptCredentialProposalOptions, AcceptCredentialRequestOptions, CreateCredentialOfferOptions, CreateCredentialProblemReportOptions, CreateCredentialProposalOptions, CreateCredentialRequestOptions, CredentialFormatDataMessagePayload, CredentialFormatsFromProtocols, CredentialProtocolMsgReturnType, DeleteCredentialOptions, GetCredentialFormatDataReturn, NegotiateCredentialOfferOptions, NegotiateCredentialProposalOptions };
}
/**
 * Get the format data payload for a specific message from a list of CredentialFormat interfaces and a message
 *
 * For an indy offer, this resolves to the cred abstract format as defined here:
 * https://github.com/hyperledger/aries-rfcs/tree/b3a3942ef052039e73cd23d847f42947f8287da2/features/0592-indy-attachments#cred-abstract-format
 *
 * @example
 * ```
 *
 * type OfferFormatData = CredentialFormatDataMessagePayload<[IndyCredentialFormat, JsonLdCredentialFormat], 'createOffer'>
 *
 * // equal to
 * type OfferFormatData = {
 *  indy: {
 *   // ... payload for indy offer attachment as defined in RFC 0592 ...
 *  },
 *  jsonld: {
 *   // ... payload for jsonld offer attachment as defined in RFC 0593 ...
 *  }
 * }
 * ```
 */
type CredentialFormatDataMessagePayload<CFs extends DidCommCredentialFormat[] = DidCommCredentialFormat[], M extends keyof DidCommCredentialFormat['formatData'] = keyof DidCommCredentialFormat['formatData']> = { [Service in CFs[number] as Service['formatKey']]?: Service['formatData'][M] };
/**
 * Infer the {@link DidCommCredentialFormat} types based on an array of {@link DidCommCredentialProtocol} types.
 *
 * It does this by extracting the `CredentialFormatServices` generic from the `DidCommCredentialProtocol`, and
 * then extracting the `CredentialFormat` generic from each of the `CredentialFormatService` types.
 *
 * @example
 * ```
 * // TheCredentialFormatServices is now equal to [IndyCredentialFormatService]
 * type TheCredentialFormatServices = CredentialFormatsFromProtocols<[DidCommCredentialV1Protocol]>
 * ```
 *
 * Because the `DidCommCredentialV1Protocol` is defined as follows:
 * ```
 * class DidCommCredentialV1Protocol implements DidCommCredentialProtocol<[IndyCredentialFormatService]> {
 * }
 * ```
 */
type CredentialFormatsFromProtocols<Type extends DidCommCredentialProtocol[]> = Type[number] extends DidCommCredentialProtocol<infer CredentialFormatServices> ? CredentialFormatServices extends DidCommCredentialFormatService[] ? ExtractCredentialFormats<CredentialFormatServices> : never : never;
/**
 * Get format data return value. Each key holds a mapping of credential format key to format data.
 *
 * @example
 * ```
 * {
 *   proposal: {
 *     indy: {
 *       cred_def_id: string
 *     }
 *   }
 * }
 * ```
 */
type GetCredentialFormatDataReturn<CFs extends DidCommCredentialFormat[] = DidCommCredentialFormat[]> = {
  proposalAttributes?: DidCommCredentialPreviewAttributeOptions[];
  proposal?: CredentialFormatDataMessagePayload<CFs, 'proposal'>;
  offer?: CredentialFormatDataMessagePayload<CFs, 'offer'>;
  offerAttributes?: DidCommCredentialPreviewAttributeOptions[];
  request?: CredentialFormatDataMessagePayload<CFs, 'request'>;
  credential?: CredentialFormatDataMessagePayload<CFs, 'credential'>;
};
interface BaseOptions {
  comment?: string;
  autoAcceptCredential?: DidCommAutoAcceptCredential;
  /**
   * Will be ignored for v1 protocol as it is not supported
   */
  goalCode?: string;
  /**
   * Will be ignored for v1 protocol as it is not supported
   */
  goal?: string;
}
interface CreateCredentialProposalOptions<CFs extends DidCommCredentialFormatService[]> extends BaseOptions {
  connectionRecord: DidCommConnectionRecord;
  credentialFormats: DidCommCredentialFormatPayload<ExtractCredentialFormats<CFs>, 'createProposal'>;
}
interface AcceptCredentialProposalOptions<CFs extends DidCommCredentialFormatService[]> extends BaseOptions {
  credentialExchangeRecord: DidCommCredentialExchangeRecord;
  credentialFormats?: DidCommCredentialFormatPayload<ExtractCredentialFormats<CFs>, 'acceptProposal'>;
}
interface NegotiateCredentialProposalOptions<CFs extends DidCommCredentialFormatService[]> {
  credentialExchangeRecord: DidCommCredentialExchangeRecord;
  credentialFormats: DidCommCredentialFormatPayload<ExtractCredentialFormats<CFs>, 'createOffer'>;
  autoAcceptCredential?: DidCommAutoAcceptCredential;
  comment?: string;
  /**
   * Will be ignored for v1 protocol as it is not supported
   */
  goalCode?: string;
  /**
   * Will be ignored for v1 protocol as it is not supported
   */
  goal?: string;
}
interface CreateCredentialOfferOptions<CFs extends DidCommCredentialFormatService[]> extends BaseOptions {
  connectionRecord?: DidCommConnectionRecord;
  credentialFormats: DidCommCredentialFormatPayload<ExtractCredentialFormats<CFs>, 'createOffer'>;
}
interface AcceptCredentialOfferOptions<CFs extends DidCommCredentialFormatService[]> extends BaseOptions {
  credentialExchangeRecord: DidCommCredentialExchangeRecord;
  credentialFormats?: DidCommCredentialFormatPayload<ExtractCredentialFormats<CFs>, 'acceptOffer'>;
}
interface NegotiateCredentialOfferOptions<CFs extends DidCommCredentialFormatService[]> extends BaseOptions {
  credentialExchangeRecord: DidCommCredentialExchangeRecord;
  credentialFormats: DidCommCredentialFormatPayload<ExtractCredentialFormats<CFs>, 'createProposal'>;
}
interface CreateCredentialRequestOptions<CFs extends DidCommCredentialFormatService[]> extends BaseOptions {
  connectionRecord: DidCommConnectionRecord;
  credentialFormats: DidCommCredentialFormatPayload<ExtractCredentialFormats<CFs>, 'createRequest'>;
}
interface AcceptCredentialRequestOptions<CFs extends DidCommCredentialFormatService[]> extends BaseOptions {
  credentialExchangeRecord: DidCommCredentialExchangeRecord;
  credentialFormats?: DidCommCredentialFormatPayload<ExtractCredentialFormats<CFs>, 'acceptRequest'>;
}
interface AcceptCredentialOptions {
  credentialExchangeRecord: DidCommCredentialExchangeRecord;
}
interface CreateCredentialProblemReportOptions {
  credentialExchangeRecord: DidCommCredentialExchangeRecord;
  description: string;
}
interface CredentialProtocolMsgReturnType<MessageType extends DidCommMessage> {
  message: MessageType;
  credentialExchangeRecord: DidCommCredentialExchangeRecord;
}
interface DeleteCredentialOptions {
  deleteAssociatedCredentials?: boolean;
  deleteAssociatedDidCommMessages?: boolean;
}
//#endregion
export { AcceptCredentialOfferOptions, AcceptCredentialOptions, AcceptCredentialProposalOptions, AcceptCredentialRequestOptions, CreateCredentialOfferOptions, CreateCredentialProblemReportOptions, CreateCredentialProposalOptions, CreateCredentialRequestOptions, CredentialFormatsFromProtocols, CredentialProtocolMsgReturnType, DeleteCredentialOptions, DidCommCredentialProtocolOptions_d_exports, GetCredentialFormatDataReturn, NegotiateCredentialOfferOptions, NegotiateCredentialProposalOptions };
//# sourceMappingURL=DidCommCredentialProtocolOptions.d.mts.map