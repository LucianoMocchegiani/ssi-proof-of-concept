import { DidCommMessage } from "../../../../DidCommMessage.mjs";
import { DidCommMessageHandlerInboundMessage } from "../../../../handlers/DidCommMessageHandler.mjs";
import "../../../../handlers/index.mjs";
import { DidCommProblemReportMessage } from "../../../../messages/problem-reports/DidCommProblemReportMessage.mjs";
import "../../../../messages/index.mjs";
import { DidCommCredentialExchangeRecord } from "../../repository/DidCommCredentialExchangeRecord.mjs";
import { DidCommCredentialFormat } from "../../formats/DidCommCredentialFormat.mjs";
import { ExtractCredentialFormats } from "../../formats/DidCommCredentialFormatServiceOptions.mjs";
import { DidCommCredentialFormatService } from "../../formats/DidCommCredentialFormatService.mjs";
import "../../formats/index.mjs";
import { DidCommMessageHandlerRegistry } from "../../../../DidCommMessageHandlerRegistry.mjs";
import "../../repository/index.mjs";
import { AcceptCredentialOfferOptions, AcceptCredentialOptions, AcceptCredentialProposalOptions, AcceptCredentialRequestOptions, CreateCredentialOfferOptions, CreateCredentialProblemReportOptions, CreateCredentialProposalOptions, CreateCredentialRequestOptions, CredentialProtocolMsgReturnType, GetCredentialFormatDataReturn, NegotiateCredentialOfferOptions, NegotiateCredentialProposalOptions } from "../DidCommCredentialProtocolOptions.mjs";
import { DidCommCredentialProtocol } from "../DidCommCredentialProtocol.mjs";
import { DidCommBaseCredentialProtocol } from "../DidCommBaseCredentialProtocol.mjs";
import { DidCommCredentialV2AckMessage } from "./messages/DidCommCredentialV2AckMessage.mjs";
import { DidCommIssueCredentialV2Message } from "./messages/DidCommIssueCredentialV2Message.mjs";
import { DidCommOfferCredentialV2Message } from "./messages/DidCommOfferCredentialV2Message.mjs";
import { DidCommOfferCredentialV2Handler } from "./handlers/DidCommOfferCredentialV2Handler.mjs";
import { DidCommProposeCredentialV2Message } from "./messages/DidCommProposeCredentialV2Message.mjs";
import { DidCommRequestCredentialV2Message } from "./messages/DidCommRequestCredentialV2Message.mjs";
import "./handlers/index.mjs";
import "./messages/index.mjs";
import { DidCommInboundMessageContext } from "../../../../models/DidCommInboundMessageContext.mjs";
import "../../../../models/index.mjs";
import { DidCommFeatureRegistry } from "../../../../DidCommFeatureRegistry.mjs";
import { AgentContext } from "@credo-ts/core";

//#region src/modules/credentials/protocol/v2/DidCommCredentialV2Protocol.d.ts
interface DidCommCredentialV2ProtocolConfig<CredentialFormatServices extends DidCommCredentialFormatService[]> {
  credentialFormats: CredentialFormatServices;
}
declare class DidCommCredentialV2Protocol<CFs extends DidCommCredentialFormatService[] = DidCommCredentialFormatService[]> extends DidCommBaseCredentialProtocol<CFs> implements DidCommCredentialProtocol<CFs> {
  private credentialFormatCoordinator;
  private credentialFormats;
  constructor({
    credentialFormats
  }: DidCommCredentialV2ProtocolConfig<CFs>);
  /**
   * The version of the issue credential protocol this service supports
   */
  readonly version: "v2";
  /**
   * Registers the protocol implementation (handlers, feature registry) on the agent.
   */
  register(messageHandlerRegistry: DidCommMessageHandlerRegistry, featureRegistry: DidCommFeatureRegistry): void;
  /**
   * Create a {@link DidCommProposeCredentialV2Message} not bound to an existing credential exchange.
   *
   * @param proposal The ProposeCredentialOptions object containing the important fields for the credential message
   * @returns Object containing proposal message and associated credential record
   *
   */
  createProposal(agentContext: AgentContext, {
    connectionRecord,
    credentialFormats,
    comment,
    goal,
    goalCode,
    autoAcceptCredential
  }: CreateCredentialProposalOptions<CFs>): Promise<CredentialProtocolMsgReturnType<DidCommMessage>>;
  /**
   * Method called by {@link DidCommProposeCredentialV2Handler} on reception of a propose credential message
   * We do the necessary processing here to accept the proposal and do the state change, emit event etc.
   * @param messageContext the inbound propose credential message
   * @returns credential record appropriate for this incoming message (once accepted)
   */
  processProposal(messageContext: DidCommInboundMessageContext<DidCommProposeCredentialV2Message>): Promise<DidCommCredentialExchangeRecord>;
  acceptProposal(agentContext: AgentContext, {
    credentialExchangeRecord,
    credentialFormats,
    autoAcceptCredential,
    comment,
    goal,
    goalCode
  }: AcceptCredentialProposalOptions<CFs>): Promise<CredentialProtocolMsgReturnType<DidCommOfferCredentialV2Message>>;
  /**
   * Negotiate a credential proposal as issuer (by sending a credential offer message) to the connection
   * associated with the credential record.
   *
   * @param options configuration for the offer see {@link NegotiateCredentialProposalOptions}
   * @returns Credential exchange record associated with the credential offer
   *
   */
  negotiateProposal(agentContext: AgentContext, {
    credentialExchangeRecord,
    credentialFormats,
    autoAcceptCredential,
    comment,
    goal,
    goalCode
  }: NegotiateCredentialProposalOptions<CFs>): Promise<CredentialProtocolMsgReturnType<DidCommOfferCredentialV2Message>>;
  /**
   * Create a {@link DidCommOfferCredentialV2Message} as beginning of protocol process. If no connectionId is provided, the
   * exchange will be created without a connection for usage in oob and connection-less issuance.
   *
   * @param formatService {@link DidCommCredentialFormatService} the format service object containing format-specific logic
   * @param options attributes of the original offer
   * @returns Object containing offer message and associated credential record
   *
   */
  createOffer(agentContext: AgentContext, {
    credentialFormats,
    autoAcceptCredential,
    comment,
    goal,
    goalCode,
    connectionRecord
  }: CreateCredentialOfferOptions<CFs>): Promise<CredentialProtocolMsgReturnType<DidCommOfferCredentialV2Message>>;
  /**
   * Method called by {@link DidCommOfferCredentialV2Handler} on reception of a offer credential message
   * We do the necessary processing here to accept the offer and do the state change, emit event etc.
   * @param messageContext the inbound offer credential message
   * @returns credential record appropriate for this incoming message (once accepted)
   */
  processOffer(messageContext: DidCommMessageHandlerInboundMessage<DidCommOfferCredentialV2Handler>): Promise<DidCommCredentialExchangeRecord>;
  acceptOffer(agentContext: AgentContext, {
    credentialExchangeRecord,
    autoAcceptCredential,
    comment,
    goal,
    goalCode,
    credentialFormats
  }: AcceptCredentialOfferOptions<CFs>): Promise<{
    credentialExchangeRecord: DidCommCredentialExchangeRecord;
    message: DidCommRequestCredentialV2Message;
  }>;
  /**
   * Create a {@link ProposePresentationMessage} as response to a received credential offer.
   * To create a proposal not bound to an existing credential exchange, use {@link createProposal}.
   *
   * @param options configuration to use for the proposal
   * @returns Object containing proposal message and associated credential record
   *
   */
  negotiateOffer(agentContext: AgentContext, {
    credentialExchangeRecord,
    credentialFormats,
    autoAcceptCredential,
    comment,
    goal,
    goalCode
  }: NegotiateCredentialOfferOptions<CFs>): Promise<CredentialProtocolMsgReturnType<DidCommProposeCredentialV2Message>>;
  /**
   * Create a {@link DidCommRequestCredentialV2Message} as beginning of protocol process.
   * @returns Object containing offer message and associated credential record
   *
   */
  createRequest(agentContext: AgentContext, {
    credentialFormats,
    autoAcceptCredential,
    comment,
    goal,
    goalCode,
    connectionRecord
  }: CreateCredentialRequestOptions<CFs>): Promise<CredentialProtocolMsgReturnType<DidCommRequestCredentialV2Message>>;
  /**
   * Process a received {@link RequestCredentialMessage}. This will not accept the credential request
   * or send a credential. It will only update the existing credential record with
   * the information from the credential request message. Use {@link createCredential}
   * after calling this method to create a credential.
   *z
   * @param messageContext The message context containing a v2 credential request message
   * @returns credential record associated with the credential request message
   *
   */
  processRequest(messageContext: DidCommInboundMessageContext<DidCommRequestCredentialV2Message>): Promise<DidCommCredentialExchangeRecord>;
  acceptRequest(agentContext: AgentContext, {
    credentialExchangeRecord,
    autoAcceptCredential,
    comment,
    goal,
    goalCode,
    credentialFormats
  }: AcceptCredentialRequestOptions<CFs>): Promise<{
    credentialExchangeRecord: DidCommCredentialExchangeRecord;
    message: DidCommIssueCredentialV2Message;
  }>;
  /**
   * Process a received {@link DidCommIssueCredentialV2Message}. This will not accept the credential
   * or send a credential acknowledgement. It will only update the existing credential record with
   * the information from the issue credential message. Use {@link createAck}
   * after calling this method to create a credential acknowledgement.
   *
   * @param messageContext The message context containing an issue credential message
   *
   * @returns credential record associated with the issue credential message
   *
   */
  processCredential(messageContext: DidCommInboundMessageContext<DidCommIssueCredentialV2Message>): Promise<DidCommCredentialExchangeRecord>;
  /**
   * Create a {@link DidCommCredentialV2AckMessage} as response to a received credential.
   *
   * @param credentialExchangeRecord The credential record for which to create the credential acknowledgement
   * @returns Object containing credential acknowledgement message and associated credential record
   *
   */
  acceptCredential(agentContext: AgentContext, {
    credentialExchangeRecord
  }: AcceptCredentialOptions): Promise<CredentialProtocolMsgReturnType<DidCommCredentialV2AckMessage>>;
  /**
   * Process a received {@link CredentialAckMessage}.
   *
   * @param messageContext The message context containing a credential acknowledgement message
   * @returns credential record associated with the credential acknowledgement message
   *
   */
  processAck(messageContext: DidCommInboundMessageContext<DidCommCredentialV2AckMessage>): Promise<DidCommCredentialExchangeRecord>;
  /**
   * Create a {@link DidCommCredentialV2ProblemReportMessage} to be sent.
   *
   * @param message message to send
   * @returns a {@link DidCommCredentialV2ProblemReportMessage}
   *
   */
  createProblemReport(_agentContext: AgentContext, {
    credentialExchangeRecord,
    description
  }: CreateCredentialProblemReportOptions): Promise<CredentialProtocolMsgReturnType<DidCommProblemReportMessage>>;
  shouldAutoRespondToProposal(agentContext: AgentContext, options: {
    credentialExchangeRecord: DidCommCredentialExchangeRecord;
    proposalMessage: DidCommProposeCredentialV2Message;
  }): Promise<boolean>;
  shouldAutoRespondToOffer(agentContext: AgentContext, options: {
    credentialExchangeRecord: DidCommCredentialExchangeRecord;
    offerMessage: DidCommOfferCredentialV2Message;
  }): Promise<boolean>;
  shouldAutoRespondToRequest(agentContext: AgentContext, options: {
    credentialExchangeRecord: DidCommCredentialExchangeRecord;
    requestMessage: DidCommRequestCredentialV2Message;
  }): Promise<boolean>;
  shouldAutoRespondToCredential(agentContext: AgentContext, options: {
    credentialExchangeRecord: DidCommCredentialExchangeRecord;
    credentialMessage: DidCommIssueCredentialV2Message;
  }): Promise<boolean>;
  findProposalMessage(agentContext: AgentContext, credentialExchangeId: string): Promise<DidCommProposeCredentialV2Message | null>;
  findOfferMessage(agentContext: AgentContext, credentialExchangeId: string): Promise<DidCommOfferCredentialV2Message | null>;
  findRequestMessage(agentContext: AgentContext, credentialExchangeId: string): Promise<DidCommRequestCredentialV2Message | null>;
  findCredentialMessage(agentContext: AgentContext, credentialExchangeId: string): Promise<DidCommIssueCredentialV2Message | null>;
  getFormatData(agentContext: AgentContext, credentialExchangeId: string): Promise<GetCredentialFormatDataReturn<ExtractCredentialFormats<CFs>>>;
  /**
   * Get all the format service objects for a given credential format from an incoming message
   * @param messageFormats the format objects containing the format name (eg indy)
   * @return the credential format service objects in an array - derived from format object keys
   */
  private getFormatServicesFromMessage;
  /**
   * Get all the format service objects for a given credential format
   * @param credentialFormats the format object containing various optional parameters
   * @return the credential format service objects in an array - derived from format object keys
   */
  private getFormatServices;
  private getFormatServiceForFormatKey;
  private getFormatServiceForFormat;
  protected getFormatServiceForRecordType(credentialRecordType: string): DidCommCredentialFormatService<DidCommCredentialFormat>;
}
//#endregion
export { DidCommCredentialV2Protocol, DidCommCredentialV2ProtocolConfig };
//# sourceMappingURL=DidCommCredentialV2Protocol.d.mts.map