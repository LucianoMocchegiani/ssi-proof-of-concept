{"version":3,"file":"DidCommProblemReportMessage.mjs","names":[],"sources":["../../../src/messages/problem-reports/DidCommProblemReportMessage.ts"],"sourcesContent":["// Create a base DidCommProblemReportMessage message class and add it to the messages directory\nimport { Expose } from 'class-transformer'\nimport { IsEnum, IsOptional, IsString } from 'class-validator'\n\nimport { DidCommMessage } from '../../DidCommMessage'\nimport { IsValidMessageType, parseMessageType } from '../../util/messageType'\n\nexport enum WhoRetriesStatus {\n  You = 'YOU',\n  Me = 'ME',\n  Both = 'BOTH',\n  None = 'NONE',\n}\n\nexport enum ImpactStatus {\n  Message = 'MESSAGE',\n  Thread = 'THREAD',\n  Connection = 'CONNECTION',\n}\n\nexport enum WhereStatus {\n  Cloud = 'CLOUD',\n  Edge = 'EDGE',\n  Wire = 'WIRE',\n  Agency = 'AGENCY',\n}\n\nexport enum OtherStatus {\n  You = 'YOU',\n  Me = 'ME',\n  Other = 'OTHER',\n}\n\nexport interface DescriptionOptions {\n  en: string\n  code: string\n}\n\nexport interface FixHintOptions {\n  en: string\n}\n\nexport interface DidCommProblemReportMessageOptions {\n  id?: string\n  description: DescriptionOptions\n  problemItems?: string[]\n  whoRetries?: WhoRetriesStatus\n  fixHint?: FixHintOptions\n  impact?: ImpactStatus\n  where?: WhereStatus\n  noticedTime?: string\n  trackingUri?: string\n  escalationUri?: string\n}\n\n/**\n * @see https://github.com/hyperledger/aries-rfcs/blob/main/features/0035-report-problem/README.md\n */\nexport class DidCommProblemReportMessage extends DidCommMessage {\n  /**\n   * Create new ReportProblem instance.\n   * @param options\n   */\n  public constructor(options: DidCommProblemReportMessageOptions) {\n    super()\n\n    if (options) {\n      this.id = options.id || this.generateId()\n      this.description = options.description\n      this.problemItems = options.problemItems\n      this.whoRetries = options.whoRetries\n      this.fixHint = options.fixHint\n      this.impact = options.impact\n      this.where = options.where\n      this.noticedTime = options.noticedTime\n      this.trackingUri = options.trackingUri\n      this.escalationUri = options.escalationUri\n    }\n  }\n\n  @IsValidMessageType(DidCommProblemReportMessage.type)\n  public readonly type: string = DidCommProblemReportMessage.type.messageTypeUri\n  public static readonly type = parseMessageType('https://didcomm.org/notification/1.0/problem-report')\n\n  public description!: DescriptionOptions\n\n  @IsOptional()\n  @Expose({ name: 'problem_items' })\n  public problemItems?: string[]\n\n  @IsOptional()\n  @IsEnum(WhoRetriesStatus)\n  @Expose({ name: 'who_retries' })\n  public whoRetries?: WhoRetriesStatus\n\n  @IsOptional()\n  @Expose({ name: 'fix_hint' })\n  public fixHint?: FixHintOptions\n\n  @IsOptional()\n  @IsEnum(WhereStatus)\n  public where?: WhereStatus\n\n  @IsOptional()\n  @IsEnum(ImpactStatus)\n  public impact?: ImpactStatus\n\n  @IsOptional()\n  @IsString()\n  @Expose({ name: 'noticed_time' })\n  public noticedTime?: string\n\n  @IsOptional()\n  @IsString()\n  @Expose({ name: 'tracking_uri' })\n  public trackingUri?: string\n\n  @IsOptional()\n  @IsString()\n  @Expose({ name: 'escalation_uri' })\n  public escalationUri?: string\n}\n"],"mappings":";;;;;;;;;AAOA,IAAY,8DAAL;AACL;AACA;AACA;AACA;;;AAGF,IAAY,sDAAL;AACL;AACA;AACA;;;AAGF,IAAY,oDAAL;AACL;AACA;AACA;AACA;;;AAGF,IAAY,oDAAL;AACL;AACA;AACA;;;;;;AA4BF,IAAa,8BAAb,MAAa,oCAAoC,eAAe;;;;;CAK9D,AAAO,YAAY,SAA6C;AAC9D,SAAO;OAiBO,OAAe,4BAA4B,KAAK;AAf9D,MAAI,SAAS;AACX,QAAK,KAAK,QAAQ,MAAM,KAAK,YAAY;AACzC,QAAK,cAAc,QAAQ;AAC3B,QAAK,eAAe,QAAQ;AAC5B,QAAK,aAAa,QAAQ;AAC1B,QAAK,UAAU,QAAQ;AACvB,QAAK,SAAS,QAAQ;AACtB,QAAK,QAAQ,QAAQ;AACrB,QAAK,cAAc,QAAQ;AAC3B,QAAK,cAAc,QAAQ;AAC3B,QAAK,gBAAgB,QAAQ;;;;4BAMV,OAAO,iBAAiB,sDAAsD;YAFpG,mBAAmB,4BAA4B,KAAK;;CAMpD,YAAY;CACZ,OAAO,EAAE,MAAM,iBAAiB,CAAC;;;;CAGjC,YAAY;CACZ,OAAO,iBAAiB;CACxB,OAAO,EAAE,MAAM,eAAe,CAAC;;;;CAG/B,YAAY;CACZ,OAAO,EAAE,MAAM,YAAY,CAAC;;;;CAG5B,YAAY;CACZ,OAAO,YAAY;;;;CAGnB,YAAY;CACZ,OAAO,aAAa;;;;CAGpB,YAAY;CACZ,UAAU;CACV,OAAO,EAAE,MAAM,gBAAgB,CAAC;;;;CAGhC,YAAY;CACZ,UAAU;CACV,OAAO,EAAE,MAAM,gBAAgB,CAAC;;;;CAGhC,YAAY;CACZ,UAAU;CACV,OAAO,EAAE,MAAM,kBAAkB,CAAC"}